{"title":"MySQL基础","uid":"4a207b7e885fdbcca8129599135e5f2e","slug":"第一篇","date":"2024-10-16T01:28:20.128Z","updated":"2024-10-16T03:43:33.267Z","comments":true,"path":"api/articles/第一篇.json","keywords":null,"cover":[],"content":"<p><img src=\"https://gitee.com/niankuozheng/image/raw/master/111.jpg\" alt=\"1\"></p>\n<h1 id=\"MySQL基础\"><a href=\"#MySQL基础\" class=\"headerlink\" title=\"MySQL基础\"></a>MySQL基础</h1><h2 id=\"数据库概论\"><a href=\"#数据库概论\" class=\"headerlink\" title=\"数据库概论\"></a>数据库概论</h2><h3 id=\"数据管理演变\"><a href=\"#数据管理演变\" class=\"headerlink\" title=\"数据管理演变\"></a>数据管理演变</h3><blockquote>\n<ol>\n<li>人工档案管理</li>\n<li>文件系统管理</li>\n<li>数据库管理</li>\n</ol>\n</blockquote>\n<h3 id=\"数据库管理系统\"><a href=\"#数据库管理系统\" class=\"headerlink\" title=\"数据库管理系统\"></a>数据库管理系统</h3><blockquote>\n<ol>\n<li>层次数据库</li>\n<li>网状型数据库</li>\n<li>关系型数据库</li>\n<li>网格型数据库</li>\n<li>对象型数据库</li>\n<li>非关系型数据库</li>\n</ol>\n</blockquote>\n<h3 id=\"关系型数据库\"><a href=\"#关系型数据库\" class=\"headerlink\" title=\"关系型数据库\"></a>关系型数据库</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">数据库是一个长期存储在计算机内的、有组织的、有共享的、统一管理的数据集合.</span><br><span class=\"line\">在数据库中的数据我们可以用二维表格的形式理解,例如</span><br><span class=\"line\">表格中一列的标题我们称之为字段</span><br><span class=\"line\">表格中一行数据我们称之为一条记录</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">id</th>\n<th align=\"center\">account</th>\n<th align=\"center\">password</th>\n<th align=\"center\">nickname</th>\n<th align=\"center\">uuid</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">1</td>\n<td align=\"center\">root</td>\n<td align=\"center\">root</td>\n<td align=\"center\">超级管理员</td>\n<td align=\"center\">2e6342dd-c475-410f-9948-e4cc1948ef0f</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">admin</td>\n<td align=\"center\">admin</td>\n<td align=\"center\">guanli</td>\n<td align=\"center\">e30e8060-9320-4b72-8722-10328348a272</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">phoenix</td>\n<td align=\"center\">123456</td>\n<td align=\"center\">李昊哲</td>\n<td align=\"center\">3ddc2b0e-fdba-4f61-b0a8-2585ffdce940</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">数据库由3部分组成</span><br><span class=\"line\">数据库：用于存储数据</span><br><span class=\"line\">数据库管理系统：用户管理数据库的软件</span><br><span class=\"line\">数据库应用程序：为了提高数据库系统的管理能力使用的数据库管理的补充</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/数据库组成.png\" alt=\"数据库组成\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对数据库进行查询、修改操作的语言我们称之为SQL</span><br><span class=\"line\">结构化查询语言(Structured Query Language)简称SQL(发音：/ˈes kjuː ˈel/ &quot;S-Q-L&quot;)，</span><br><span class=\"line\">是一种特殊目的的编程语言，是一种数据库查询和程序设计语言，</span><br><span class=\"line\">用于存取数据以及查询、更新和管理关系数据库系统；</span><br><span class=\"line\">同时也是数据库脚本文件的后缀名。+</span><br><span class=\"line\">标准：SQL-92、SQL-99、SQL-2003</span><br><span class=\"line\">非标准：方言</span><br><span class=\"line\">常用关系型数据库</span><br><span class=\"line\">Oracle、MySQL、SQLServer、...</span><br><span class=\"line\">对象型数据库</span><br><span class=\"line\">PostgresQL、...</span><br><span class=\"line\">常用的非关系数据库（在中国）</span><br><span class=\"line\">Redis、MongoDB、HBase、..</span><br><span class=\"line\">按照SQL-92标准SQL包含4部分</span><br><span class=\"line\">1、数据库定义语言(DDL)：create、drop、alter、...</span><br><span class=\"line\">2、数据库操作语言(DML)：insert、update、delete、...</span><br><span class=\"line\">3、数据库查询语言(DQL)：select</span><br><span class=\"line\">4、数据库控制语言(DCL)：grant、revoke、.</span><br><span class=\"line\">5、数据库事务控制语言(TCL)：commit、rollback</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><ol>\n<li>在线安装</li>\n<li>安装包</li>\n<li>绿色版</li>\n<li>集成环境</li>\n<li>编译安装</li>\n</ol>\n<h2 id=\"数据库常用操作\"><a href=\"#数据库常用操作\" class=\"headerlink\" title=\"数据库常用操作\"></a>数据库常用操作</h2><h3 id=\"连接数据库\"><a href=\"#连接数据库\" class=\"headerlink\" title=\"连接数据库\"></a>连接数据库</h3><blockquote>\n<p>mysql</p>\n<p>-h 服务器IP</p>\n<p>-u 账户</p>\n<p>-p 密码</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -h localhost -uroot -p</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection <span class=\"built_in\">id</span> is 14</span><br><span class=\"line\">Server version: 9.0.1 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2024, Oracle and/or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"显示目前已有数据库\"><a href=\"#显示目前已有数据库\" class=\"headerlink\" title=\"显示目前已有数据库\"></a>显示目前已有数据库</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> databases;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> databases;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Database           <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> information_schema <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> mysql              <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> performance_schema <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> sys                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------+</span></span><br><span class=\"line\"><span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"显示当前使用的数据库\"><a href=\"#显示当前使用的数据库\" class=\"headerlink\" title=\"显示当前使用的数据库\"></a>显示当前使用的数据库</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> database();</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> database() <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建数据库\"><a href=\"#创建数据库\" class=\"headerlink\" title=\"创建数据库\"></a>创建数据库</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 创建数据库 格式：<span class=\"keyword\">create</span> database 数据库名称;</span><br><span class=\"line\"><span class=\"keyword\">create</span> database `chap01`;</span><br><span class=\"line\"># 显示已存在的数据库 检查数据库创建是否成功</span><br><span class=\"line\"><span class=\"keyword\">show</span> databases;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看数据库创建详细过程\"><a href=\"#查看数据库创建详细过程\" class=\"headerlink\" title=\"查看数据库创建详细过程\"></a>查看数据库创建详细过程</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> database `chap01`;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------+----------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Database <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> Database                                                                                                                  <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------+----------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> chap01   <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> DATABASE `chap01` <span class=\"comment\">/*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */</span> <span class=\"comment\">/*!80016 DEFAULT ENCRYPTION=&#x27;N&#x27; */</span> <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------+----------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建数据库同时指定字符集\"><a href=\"#创建数据库同时指定字符集\" class=\"headerlink\" title=\"创建数据库同时指定字符集\"></a>创建数据库同时指定字符集</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 创建数据库并指定字符集 推荐字符集使用 utf8 或者  utf8mb4</span><br><span class=\"line\"><span class=\"keyword\">create</span> database `chap001` <span class=\"keyword\">default</span> <span class=\"type\">character</span> <span class=\"keyword\">set</span> gbk;</span><br><span class=\"line\"><span class=\"keyword\">show</span> databases;</span><br><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">create</span> database `chap001`;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除数据库\"><a href=\"#删除数据库\" class=\"headerlink\" title=\"删除数据库\"></a>删除数据库</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 删除数据库 <span class=\"keyword\">drop</span> database 数据库名称</span><br><span class=\"line\"><span class=\"keyword\">drop</span> database `chap001`;</span><br><span class=\"line\"># 显示已存在的数据库 检查数据库删除是否成功</span><br><span class=\"line\"><span class=\"keyword\">show</span> databases;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"切换数据库\"><a href=\"#切换数据库\" class=\"headerlink\" title=\"切换数据库\"></a>切换数据库</h3><blockquote>\n<p>使用哪一个数据库</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 切换数据库 使用哪个数据库</span><br><span class=\"line\">use chap01;</span><br><span class=\"line\">#  显示当前使用的数据库 检查数据库切换是否成功</span><br><span class=\"line\"><span class=\"keyword\">select</span> database();</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> database();</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> database() <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> use chap01;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">select</span> database();</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> database() <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> chap01     <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"数据表常用操作\"><a href=\"#数据表常用操作\" class=\"headerlink\" title=\"数据表常用操作\"></a>数据表常用操作</h2><p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20200825112014915.png\" alt=\"·\"></p>\n<h3 id=\"创建基本数据表\"><a href=\"#创建基本数据表\" class=\"headerlink\" title=\"创建基本数据表\"></a>创建基本数据表</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 创建数据库</span><br><span class=\"line\"><span class=\"keyword\">create</span> databae chap01;</span><br><span class=\"line\"># 使用刚刚创建的数据库</span><br><span class=\"line\">use chap01;</span><br><span class=\"line\"># 创建数据表 格式 <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表名称</span><br><span class=\"line\"># [HY000][<span class=\"number\">4028</span>] A <span class=\"keyword\">table</span> must have <span class=\"keyword\">at</span> least <span class=\"keyword\">one</span> visible column.</span><br><span class=\"line\"># <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> `tb_user`;</span><br><span class=\"line\"># 基本格式 <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表名称 (字段<span class=\"number\">1</span> 数据类型,字段<span class=\"number\">2</span> 数据类型,字段...);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> `tb_user` (`user_id` <span class=\"type\">int</span>,`user_name` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>));</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看数据表创建详细过程\"><a href=\"#查看数据表创建详细过程\" class=\"headerlink\" title=\"查看数据表创建详细过程\"></a>查看数据表创建详细过程</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> `tb_user`;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>根据数据表创建详细过程 引申出 创建数据表的格式</p>\n<p>创建数据表的同时 指定使用的引擎和字符集</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> `tb_user` (</span><br><span class=\"line\">    `user_id` <span class=\"type\">int</span>,</span><br><span class=\"line\">    `user_name` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)</span><br><span class=\"line\">) engine<span class=\"operator\">=</span>innodb <span class=\"keyword\">default</span> charset<span class=\"operator\">=</span>utf8mb4;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"描述数据表结构\"><a href=\"#描述数据表结构\" class=\"headerlink\" title=\"描述数据表结构\"></a>描述数据表结构</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">describe</span> `tb_user`;</span><br><span class=\"line\"><span class=\"keyword\">desc</span> `tb_user`;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"显示当前数据库所有数据表\"><a href=\"#显示当前数据库所有数据表\" class=\"headerlink\" title=\"显示当前数据库所有数据表\"></a>显示当前数据库所有数据表</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show tables;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除数据表\"><a href=\"#删除数据表\" class=\"headerlink\" title=\"删除数据表\"></a>删除数据表</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> `tb_user`;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"存储引擎\"><a href=\"#存储引擎\" class=\"headerlink\" title=\"存储引擎\"></a>存储引擎</h3><blockquote>\n<p>数据库存储引擎是数据库地产软件组织</p>\n</blockquote>\n<blockquote>\n<p>MySQL 提供了多给不同的存储引擎，包括事务安全型和非事务安全型</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> engines;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20241014151203607.png\" alt=\"image-20241014151203607\"></p>\n<h3 id=\"数据类型\"><a href=\"#数据类型\" class=\"headerlink\" title=\"数据类型\"></a>数据类型</h3><blockquote>\n<ol>\n<li>数值型 整数、浮点数和定点数</li>\n<li>日期与时间</li>\n<li>字符串</li>\n<li>布尔型</li>\n</ol>\n</blockquote>\n<h4 id=\"整数型\"><a href=\"#整数型\" class=\"headerlink\" title=\"整数型\"></a>整数型</h4><table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>说明</th>\n<th>存储</th>\n<th>有符号范围</th>\n<th>无符号范围</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>tinyint</td>\n<td>很小的整数</td>\n<td>1字节</td>\n<td>-128~127</td>\n<td>0~255</td>\n</tr>\n<tr>\n<td>smallint</td>\n<td>小的整数</td>\n<td>2字节</td>\n<td>-32768~32767</td>\n<td>0~65535</td>\n</tr>\n<tr>\n<td>mediumint</td>\n<td>中等大小的整数</td>\n<td>3字节</td>\n<td>-8388608~8388607</td>\n<td>0~16777215</td>\n</tr>\n<tr>\n<td>int(integer)</td>\n<td>普通大小的整数</td>\n<td>4字节</td>\n<td>-2147483648~2147483647</td>\n<td>0~4294967295</td>\n</tr>\n<tr>\n<td>bigint</td>\n<td>大整数</td>\n<td>8字节</td>\n<td>-9223372036854775808~9223372036854775807</td>\n<td>0~18446744073709551615</td>\n</tr>\n</tbody></table>\n<h4 id=\"浮点型\"><a href=\"#浮点型\" class=\"headerlink\" title=\"浮点型\"></a>浮点型</h4><table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>说明</th>\n<th>存储</th>\n<th>有符号范围</th>\n<th>无符号范围</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>float</td>\n<td>单精度浮点数</td>\n<td>4个字</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>double</td>\n<td>双精度浮点数</td>\n<td>8个字节</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h4 id=\"定点型\"><a href=\"#定点型\" class=\"headerlink\" title=\"定点型\"></a>定点型</h4><table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>说明</th>\n<th>存储</th>\n<th>有符号范围</th>\n<th>无符号范围</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>decimal(M,D)</td>\n<td>严格定点数</td>\n<td>M+2个字节</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h4 id=\"日期与时间\"><a href=\"#日期与时间\" class=\"headerlink\" title=\"日期与时间\"></a>日期与时间</h4><table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>日期格式</th>\n<th>存储</th>\n<th>日期范围</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>year</td>\n<td>YYYY</td>\n<td>1字节</td>\n<td>1901~2155</td>\n</tr>\n<tr>\n<td>date</td>\n<td>YYYY-MM-DD</td>\n<td>3字节</td>\n<td>1000-01-01~9999-12-31</td>\n</tr>\n<tr>\n<td>time</td>\n<td>HH:MM:SS</td>\n<td>3字节</td>\n<td>-838:59:59~838:59:59</td>\n</tr>\n<tr>\n<td>datetime</td>\n<td>YYYY-MM-DD HH:MM:SS</td>\n<td>8字节</td>\n<td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td>\n</tr>\n<tr>\n<td>timestamp</td>\n<td>YYYY-MM-DD HH:MM:SS</td>\n<td>4字节</td>\n<td>1970-01-01 00:00:00 UTC ~ 2038-01-19 03:14:07 UTC</td>\n</tr>\n</tbody></table>\n<h4 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h4><ol>\n<li><p>文本字符串</p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>说明</th>\n<th>存储</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>char(M)</td>\n<td>固定长度</td>\n<td>M字节，1 &lt;&#x3D;  M &lt;&#x3D;255</td>\n</tr>\n<tr>\n<td>varchar(M)</td>\n<td>非固定长度 可变长</td>\n<td>L字节，L &lt;&#x3D; M 和1 &lt;&#x3D;  M &lt;&#x3D;255</td>\n</tr>\n<tr>\n<td>tinytext</td>\n<td>非常小的文本</td>\n<td>2^8</td>\n</tr>\n<tr>\n<td>text</td>\n<td>小文本</td>\n<td>2^16</td>\n</tr>\n<tr>\n<td>mediumtext</td>\n<td>中等大小的文本</td>\n<td>2^24</td>\n</tr>\n<tr>\n<td>longtext</td>\n<td>大的文本</td>\n<td>2^32</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>二进制字符串</p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>说明</th>\n<th>存储</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>bit</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>binary</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>varbinary</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>tinyblob</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>mediumblob</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>longblob</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n</li>\n</ol>\n<h2 id=\"DML\"><a href=\"#DML\" class=\"headerlink\" title=\"DML\"></a>DML</h2><h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user (</span><br><span class=\"line\">    user_id <span class=\"type\">int</span>,</span><br><span class=\"line\">    user_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)</span><br><span class=\"line\">) engine<span class=\"operator\">=</span>innodb <span class=\"keyword\">default</span> charset<span class=\"operator\">=</span>utf8mb4;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"insert\"><a href=\"#insert\" class=\"headerlink\" title=\"insert\"></a>insert</h3><blockquote>\n<p>格式 插入一条数据 insert into 数据表名 (字段1名,字段2名,…) value (字段1值,字段2值,…)</p>\n<p>格式 插入一条数据 为所有字段赋值 insert into 数据表名 value (字段1值,字段2值,…)</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb_user (user_id,user_name) <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;user01&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb_user <span class=\"keyword\">value</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;user02&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>格式 插入多条数据 insert into 数据表名 (字段1名,字段2名,…) values (字段1值,字段2值,…),(字段1值,字段2值,…)</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb_user <span class=\"keyword\">values</span> (<span class=\"number\">3</span>,<span class=\"string\">&#x27;user03&#x27;</span>),(<span class=\"number\">4</span>,<span class=\"string\">&#x27;user04&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>查询数据表中的数据</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_user;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"update\"></a>update</h3><blockquote>\n<p>update 数据表名 set 字段1名 &#x3D; 值,字段2名 &#x3D; 值,… where 筛选字段(值必须能够帝国为到当前行)</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"keyword\">update</span> tb_user <span class=\"keyword\">set</span> user_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;李昊哲&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> tb_user <span class=\"keyword\">set</span> user_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;李昊哲&#x27;</span> <span class=\"keyword\">where</span> user_id <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_user;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"delete-truncate\"><a href=\"#delete-truncate\" class=\"headerlink\" title=\"delete truncate\"></a>delete truncate</h3><blockquote>\n<p> 格式 delete from 数据表名 where 筛选字段(值必须能够帝国为到当前行)</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> tb_user;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> tb_user <span class=\"keyword\">where</span> user_id <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_user;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>清空数据表</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> tb_user;</span><br><span class=\"line\"><span class=\"keyword\">truncate</span> tb_user;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>重点面试题 重点中的重点 必问<br>delete 与 truncate 区别<br>一般人的回答 delete 仅仅是删除数据效率比较低 truncate 相对于删除表后在重新建表 效率比较高<br>高手的回答 delete 效率比较低 为每行数据打一个标记 水位线线不变<br>高手的回答 truncate 效率比较高 相对于删除表后在重新建表 重置水位线</p>\n<p>update 与 delete 哪个速度更快<br>update &#x3D; delete + insert</p>\n</blockquote>\n<h2 id=\"约束\"><a href=\"#约束\" class=\"headerlink\" title=\"约束\"></a>约束</h2><blockquote>\n<ol>\n<li><p>非空约束</p>\n</li>\n<li><p>默认约束</p>\n</li>\n<li><p>唯一约束</p>\n</li>\n<li><p>检查约束</p>\n</li>\n<li><p>主键约束</p>\n</li>\n<li><p>外键约束</p>\n</li>\n</ol>\n</blockquote>\n<h3 id=\"非空约束\"><a href=\"#非空约束\" class=\"headerlink\" title=\"非空约束\"></a>非空约束</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user01 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> user01;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user01 <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin01&#x27;</span>,<span class=\"string\">&#x27;pass01&#x27;</span>,<span class=\"string\">&#x27;user01&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user01 (id, account, password) <span class=\"keyword\">value</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;admin02&#x27;</span>,<span class=\"string\">&#x27;pass02&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> user01;</span><br><span class=\"line\"># [HY000][<span class=\"number\">1364</span>] Field <span class=\"string\">&#x27;account&#x27;</span> doesn<span class=\"string\">&#x27;t have a default value</span></span><br><span class=\"line\"><span class=\"string\">insert into user01 (id) value (2);</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"默认约束\"><a href=\"#默认约束\" class=\"headerlink\" title=\"默认约束\"></a>默认约束</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user02 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span>  user02;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"number\">123456</span>  <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.01</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user02 <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin01&#x27;</span>,<span class=\"string\">&#x27;pass01&#x27;</span>,<span class=\"string\">&#x27;user01&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user02 (id, account, password) <span class=\"keyword\">value</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;admin02&#x27;</span>,<span class=\"string\">&#x27;pass02&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user02 (id, account) <span class=\"keyword\">value</span> (<span class=\"number\">3</span>,<span class=\"string\">&#x27;admin03&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> user02;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"唯一性约束\"><a href=\"#唯一性约束\" class=\"headerlink\" title=\"唯一性约束\"></a>唯一性约束</h3><blockquote>\n<p>注意：值虽然不能重复但是可以为空</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user03 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    id_card <span class=\"type\">varchar</span>(<span class=\"number\">18</span>) <span class=\"keyword\">unique</span> comment <span class=\"string\">&#x27;身份证&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span></span><br><span class=\"line\">);</span><br><span class=\"line\"># 或者</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user03 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    id_card <span class=\"type\">varchar</span>(<span class=\"number\">18</span>) comment <span class=\"string\">&#x27;身份证&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">unique</span> key id_card (id_card)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> user03;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"number\">123456</span>  <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id_card   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">18</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span> UNI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">5</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user03  <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin01&#x27;</span>,<span class=\"string\">&#x27;pass01&#x27;</span>,<span class=\"string\">&#x27;220422&#x27;</span>,<span class=\"string\">&#x27;user01&#x27;</span>);</span><br><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1062</span>] Duplicate entry <span class=\"string\">&#x27;220422&#x27;</span> <span class=\"keyword\">for</span> key <span class=\"string\">&#x27;user03.id_card&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user03  <span class=\"keyword\">value</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;admin02&#x27;</span>,<span class=\"string\">&#x27;pass02&#x27;</span>,<span class=\"string\">&#x27;220422&#x27;</span>,<span class=\"string\">&#x27;user02&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user03 (id, account, password, real_name) <span class=\"keyword\">value</span> (<span class=\"number\">3</span>,<span class=\"string\">&#x27;admin03&#x27;</span>,<span class=\"string\">&#x27;pass03&#x27;</span>,<span class=\"string\">&#x27;user03&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user03 (id, account, password, real_name) <span class=\"keyword\">value</span> (<span class=\"number\">4</span>,<span class=\"string\">&#x27;admin04&#x27;</span>,<span class=\"string\">&#x27;pass04&#x27;</span>,<span class=\"string\">&#x27;user04&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> user03;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"检查性约束\"><a href=\"#检查性约束\" class=\"headerlink\" title=\"检查性约束\"></a>检查性约束</h3><blockquote>\n<p>注意：值虽然必须符合检查规则但是可以为空</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user04(</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    id_card <span class=\"type\">char</span>(<span class=\"number\">18</span>) <span class=\"keyword\">unique</span> comment <span class=\"string\">&#x27;身份证&#x27;</span>,</span><br><span class=\"line\">    age <span class=\"type\">int</span> unsigned <span class=\"keyword\">check</span> (age <span class=\"operator\">&gt;=</span> <span class=\"number\">18</span>)  comment <span class=\"string\">&#x27;用户年龄 年龄在18岁以上包含18岁&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户密码&#x27;</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> user04;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"number\">123456</span>  <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id_card   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">18</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span> UNI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> age       <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">6</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">describe</span> user04;</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user04 (id,account,age) <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin01&#x27;</span>, <span class=\"number\">18</span>);</span><br><span class=\"line\"># [HY000][<span class=\"number\">3819</span>] <span class=\"keyword\">Check</span> <span class=\"keyword\">constraint</span> <span class=\"string\">&#x27;user04_chk_1&#x27;</span> <span class=\"keyword\">is</span> violated.</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user04 (id,account,age) <span class=\"keyword\">value</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;admin02&#x27;</span>, <span class=\"number\">17</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user04 (id,account) <span class=\"keyword\">value</span> (<span class=\"number\">3</span>,<span class=\"string\">&#x27;admin03&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> user04;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"主键约束\"><a href=\"#主键约束\" class=\"headerlink\" title=\"主键约束\"></a>主键约束</h3><blockquote>\n<p>值不能为空且唯一约束</p>\n<p>主键约束 约等于 非空约束 + 唯一性约束</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user050 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">unique</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> user050;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> PRI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"number\">123456</span>  <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user050;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"keyword\">Table</span>   <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> <span class=\"keyword\">Table</span>                                                                                                                                                                                                                                                                                                                                                                                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> user050 <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `user050` (</span><br><span class=\"line\">  `id` <span class=\"type\">int</span> unsigned <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">  `account` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">  `password` <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;123456&#x27;</span> COMMENT <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">  `real_name` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户姓名&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> KEY `account` (`account`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8mb4 <span class=\"keyword\">COLLATE</span><span class=\"operator\">=</span>utf8mb4_0900_ai_ci                 <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"单主键约束\"><a href=\"#单主键约束\" class=\"headerlink\" title=\"单主键约束\"></a>单主键约束</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user051 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned <span class=\"keyword\">primary</span> key comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">unique</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span></span><br><span class=\"line\">);</span><br><span class=\"line\"># 或者</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user051 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">unique</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (id)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> user051;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> PRI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> UNI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"number\">123456</span>  <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user051;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> <span class=\"keyword\">Table</span>   <span class=\"operator\">|</span> <span class=\"keyword\">Create</span> <span class=\"keyword\">Table</span>                                                                                                                                                                                                                                                                                                                                                                                                  <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> user051 <span class=\"operator\">|</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `user051` (</span><br><span class=\"line\">  `id` <span class=\"type\">int</span> unsigned <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">  `account` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">  `password` <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;123456&#x27;</span> COMMENT <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">  `real_name` <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户姓名&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> KEY `account` (`account`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8mb4 <span class=\"keyword\">COLLATE</span><span class=\"operator\">=</span>utf8mb4_0900_ai_ci                 <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user051 <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin01&#x27;</span>,<span class=\"string\">&#x27;pass01&#x27;</span>,<span class=\"string\">&#x27;user01&#x27;</span>);</span><br><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1062</span>] Duplicate entry <span class=\"string\">&#x27;1&#x27;</span> <span class=\"keyword\">for</span> key <span class=\"string\">&#x27;user051.PRIMARY&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user051 <span class=\"keyword\">value</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin02&#x27;</span>,<span class=\"string\">&#x27;pass02&#x27;</span>,<span class=\"string\">&#x27;user02&#x27;</span>);</span><br><span class=\"line\"># [HY000][<span class=\"number\">1364</span>] Field <span class=\"string\">&#x27;id&#x27;</span> doesn<span class=\"string\">&#x27;t have a default value</span></span><br><span class=\"line\"><span class=\"string\">insert into user051 (account, password, real_name) value (&#x27;</span>admin03<span class=\"string\">&#x27;,&#x27;</span>pass03<span class=\"string\">&#x27;,&#x27;</span>user03<span class=\"string\">&#x27;);</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">select * from user051;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"主键自增长\"><a href=\"#主键自增长\" class=\"headerlink\" title=\"主键自增长\"></a>主键自增长</h4><blockquote>\n<p>auto_increment</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user052 (</span><br><span class=\"line\">    id <span class=\"type\">int</span> unsigned auto_increment comment <span class=\"string\">&#x27;用户编号&#x27;</span>,</span><br><span class=\"line\">    account <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">unique</span> comment <span class=\"string\">&#x27;用户账号&#x27;</span>,</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">&#x27;123456&#x27;</span> comment <span class=\"string\">&#x27;用户密码&#x27;</span>,</span><br><span class=\"line\">    real_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) comment <span class=\"string\">&#x27;用户姓名&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (id)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> user052;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field     <span class=\"operator\">|</span> Type         <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra          <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> id        <span class=\"operator\">|</span> <span class=\"type\">int</span> unsigned <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> PRI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span> auto_increment <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> account   <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> UNI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> password  <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">200</span>) <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"number\">123456</span>  <span class=\"operator\">|</span>                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> real_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">50</span>)  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">-----------+--------------+------+-----+---------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> user052 (account, real_name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;admin01&#x27;</span>,<span class=\"string\">&#x27;user01&#x27;</span>),(<span class=\"string\">&#x27;admin02&#x27;</span>,<span class=\"string\">&#x27;user02&#x27;</span>),(<span class=\"string\">&#x27;admin03&#x27;</span>,<span class=\"string\">&#x27;user03&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> user052;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"联合主键\"><a href=\"#联合主键\" class=\"headerlink\" title=\"联合主键\"></a>联合主键</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_order (</span><br><span class=\"line\">    order_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;订单号&#x27;</span>,</span><br><span class=\"line\">    item_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;流水号&#x27;</span>,</span><br><span class=\"line\">    commodity_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;商品编号&#x27;</span>,</span><br><span class=\"line\">    quantity <span class=\"type\">int</span> comment <span class=\"string\">&#x27;购买数量&#x27;</span>,</span><br><span class=\"line\">    price <span class=\"type\">int</span> comment <span class=\"string\">&#x27;单价&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (order_id,item_id)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> tb_order;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------+------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field        <span class=\"operator\">|</span> Type <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------+------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> order_id     <span class=\"operator\">|</span> <span class=\"type\">int</span>  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> PRI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> item_id      <span class=\"operator\">|</span> <span class=\"type\">int</span>  <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> PRI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> commodity_id <span class=\"operator\">|</span> <span class=\"type\">int</span>  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> quantity     <span class=\"operator\">|</span> <span class=\"type\">int</span>  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> price        <span class=\"operator\">|</span> <span class=\"type\">int</span>  <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>       <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------+------+------+-----+---------+-------+</span></span><br><span class=\"line\"><span class=\"number\">5</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb_order <span class=\"keyword\">values</span> (<span class=\"number\">10000</span>,<span class=\"number\">1</span>,<span class=\"number\">1001</span>,<span class=\"number\">1</span>,<span class=\"number\">10</span>),(<span class=\"number\">10000</span>,<span class=\"number\">2</span>,<span class=\"number\">1002</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>),(<span class=\"number\">10000</span>,<span class=\"number\">3</span>,<span class=\"number\">1003</span>,<span class=\"number\">3</span>,<span class=\"number\">003</span>),(<span class=\"number\">10001</span>,<span class=\"number\">1</span>,<span class=\"number\">1001</span>,<span class=\"number\">1</span>,<span class=\"number\">10</span>),(<span class=\"number\">10001</span>,<span class=\"number\">2</span>,<span class=\"number\">1002</span>,<span class=\"number\">2</span>,<span class=\"number\">20</span>),(<span class=\"number\">10001</span>,<span class=\"number\">3</span>,<span class=\"number\">1003</span>,<span class=\"number\">3</span>,<span class=\"number\">003</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span>  tb_order;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"外键约束\"><a href=\"#外键约束\" class=\"headerlink\" title=\"外键约束\"></a>外键约束</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 创建主表</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> course (</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;专业编号&#x27;</span>,</span><br><span class=\"line\">    c_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (c_id)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> course (c_name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;大数据&#x27;</span>),(<span class=\"string\">&#x27;人工智能&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> course;</span><br><span class=\"line\"># 创建从表</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">    stu_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;学生编号&#x27;</span>,</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;学生姓名&#x27;</span>,</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (stu_id),</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> fk_course_student <span class=\"keyword\">foreign</span> key (c_id) <span class=\"keyword\">references</span> course (c_id)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">describe</span> student;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------+-------------+------+-----+---------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> Field    <span class=\"operator\">|</span> Type        <span class=\"operator\">|</span> <span class=\"keyword\">Null</span> <span class=\"operator\">|</span> Key <span class=\"operator\">|</span> <span class=\"keyword\">Default</span> <span class=\"operator\">|</span> Extra          <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------+-------------+------+-----+---------+----------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> stu_id   <span class=\"operator\">|</span> <span class=\"type\">int</span>         <span class=\"operator\">|</span> <span class=\"keyword\">NO</span>   <span class=\"operator\">|</span> PRI <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span> auto_increment <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> stu_name <span class=\"operator\">|</span> <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span>     <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">|</span> c_id     <span class=\"operator\">|</span> <span class=\"type\">int</span>         <span class=\"operator\">|</span> YES  <span class=\"operator\">|</span> MUL <span class=\"operator\">|</span> <span class=\"keyword\">NULL</span>    <span class=\"operator\">|</span>                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">----------+-------------+------+-----+---------+----------------+</span></span><br><span class=\"line\"><span class=\"number\">3</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student (stu_name, c_id) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">2</span>),(<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1452</span>] Cannot <span class=\"keyword\">add</span> <span class=\"keyword\">or</span> <span class=\"keyword\">update</span> a child <span class=\"type\">row</span>: a <span class=\"keyword\">foreign</span> key <span class=\"keyword\">constraint</span> fails (`chap01`.`student`, <span class=\"keyword\">CONSTRAINT</span> `fk_course_student` <span class=\"keyword\">FOREIGN</span> KEY (`c_id`) <span class=\"keyword\">REFERENCES</span> `course` (`c_id`))</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student (stu_name, c_id) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;显眼包&#x27;</span>,<span class=\"number\">3</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1451</span>] Cannot <span class=\"keyword\">delete</span> <span class=\"keyword\">or</span> <span class=\"keyword\">update</span> a parent <span class=\"type\">row</span>: a <span class=\"keyword\">foreign</span> key <span class=\"keyword\">constraint</span> fails (`chap01`.`student`, <span class=\"keyword\">CONSTRAINT</span> `fk_course_student` <span class=\"keyword\">FOREIGN</span> KEY (`c_id`) <span class=\"keyword\">REFERENCES</span> `course` (`c_id`))</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> course <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1451</span>] Cannot <span class=\"keyword\">delete</span> <span class=\"keyword\">or</span> <span class=\"keyword\">update</span> a parent <span class=\"type\">row</span>: a <span class=\"keyword\">foreign</span> key <span class=\"keyword\">constraint</span> fails (`chap01`.`student`, <span class=\"keyword\">CONSTRAINT</span> `fk_course_student` <span class=\"keyword\">FOREIGN</span> KEY (`c_id`) <span class=\"keyword\">REFERENCES</span> `course` (`c_id`))</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> course <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"># 删除主表中被用于的数据 解决方案</span><br><span class=\"line\"># <span class=\"number\">1</span>、如果子表中存在匹配的记录 删除从表外键</span><br><span class=\"line\"># <span class=\"number\">2</span>、如果子表中存在匹配的记录 将从表数据级联删除</span><br><span class=\"line\"># <span class=\"number\">3</span>、如果子表中存在匹配的记录 将子表的中的外键字段数据设置为<span class=\"keyword\">null</span></span><br><span class=\"line\"># <span class=\"number\">4</span>、如果子表中存在匹配的记录在不允许主表进行 <span class=\"keyword\">update</span> 和 <span class=\"keyword\">delete</span> 操作</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span> student;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"cascade\"><a href=\"#cascade\" class=\"headerlink\" title=\"cascade\"></a>cascade</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># cascade 级联删除 当主表发生 <span class=\"keyword\">update</span> <span class=\"operator\">|</span> <span class=\"keyword\">delete</span> 时，从表 同步 <span class=\"keyword\">update</span> <span class=\"operator\">|</span> <span class=\"keyword\">delete</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> student;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">    stu_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;学生编号&#x27;</span>,</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;学生姓名&#x27;</span>,</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (stu_id),</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> fk_course_student <span class=\"keyword\">foreign</span> key (c_id) <span class=\"keyword\">references</span> course (c_id) <span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> cascade <span class=\"keyword\">on</span> <span class=\"keyword\">update</span> cascade</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student (stu_name, c_id) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">2</span>),(<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> course <span class=\"keyword\">set</span> c_id <span class=\"operator\">=</span> <span class=\"number\">3</span> <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> course;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> course <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> course;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"no-action\"><a href=\"#no-action\" class=\"headerlink\" title=\"no action\"></a>no action</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"keyword\">no</span> action 当从表中有主表中匹配的记录 则不运行主表进行 <span class=\"keyword\">update</span> <span class=\"operator\">|</span> <span class=\"keyword\">delete</span> 操作</span><br><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span> student;</span><br><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span> course;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> course (</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;专业编号&#x27;</span>,</span><br><span class=\"line\">    c_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (c_id)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> course (c_name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;大数据&#x27;</span>),(<span class=\"string\">&#x27;人工智能&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">    stu_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;学生编号&#x27;</span>,</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;学生姓名&#x27;</span>,</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (stu_id),</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> fk_course_student <span class=\"keyword\">foreign</span> key (c_id) <span class=\"keyword\">references</span> course (c_id) <span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> <span class=\"keyword\">no</span> action <span class=\"keyword\">on</span> <span class=\"keyword\">update</span> <span class=\"keyword\">no</span> action</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student (stu_name, c_id) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">2</span>),(<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1451</span>] Cannot <span class=\"keyword\">delete</span> <span class=\"keyword\">or</span> <span class=\"keyword\">update</span> a parent <span class=\"type\">row</span>: a <span class=\"keyword\">foreign</span> key <span class=\"keyword\">constraint</span> fails (`chap01`.`student`, <span class=\"keyword\">CONSTRAINT</span> `fk_course_student` <span class=\"keyword\">FOREIGN</span> KEY (`c_id`) <span class=\"keyword\">REFERENCES</span> `course` (`c_id`))</span><br><span class=\"line\"><span class=\"keyword\">update</span> course <span class=\"keyword\">set</span> c_id <span class=\"operator\">=</span> <span class=\"number\">3</span> <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># [<span class=\"number\">23000</span>][<span class=\"number\">1451</span>] Cannot <span class=\"keyword\">delete</span> <span class=\"keyword\">or</span> <span class=\"keyword\">update</span> a parent <span class=\"type\">row</span>: a <span class=\"keyword\">foreign</span> key <span class=\"keyword\">constraint</span> fails (`chap01`.`student`, <span class=\"keyword\">CONSTRAINT</span> `fk_course_student` <span class=\"keyword\">FOREIGN</span> KEY (`c_id`) <span class=\"keyword\">REFERENCES</span> `course` (`c_id`))</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> course <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"restrict\"><a href=\"#restrict\" class=\"headerlink\" title=\"restrict\"></a>restrict</h4><blockquote>\n<p>restrict 同 no action ,都是立即检查外键约束</p>\n<p>MySQL 默认使用方案</p>\n</blockquote>\n<h4 id=\"set-null\"><a href=\"#set-null\" class=\"headerlink\" title=\"set null\"></a>set null</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 当主表 <span class=\"keyword\">update</span> <span class=\"operator\">|</span> <span class=\"keyword\">delete</span> 时，从表匹配的记录字段 设置为 <span class=\"keyword\">null</span> 注意 外键不能设置 <span class=\"keyword\">not</span> <span class=\"keyword\">null</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> student;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> course;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> course (</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;专业编号&#x27;</span>,</span><br><span class=\"line\">    c_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (c_id)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> course (c_name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;大数据&#x27;</span>),(<span class=\"string\">&#x27;人工智能&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">    stu_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;学生编号&#x27;</span>,</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;学生姓名&#x27;</span>,</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (stu_id),</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> fk_course_student <span class=\"keyword\">foreign</span> key (c_id) <span class=\"keyword\">references</span> course (c_id) <span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> <span class=\"keyword\">set</span> <span class=\"keyword\">null</span> <span class=\"keyword\">on</span> <span class=\"keyword\">update</span>  <span class=\"keyword\">set</span> <span class=\"keyword\">null</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student (stu_name, c_id) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">2</span>),(<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> course <span class=\"keyword\">set</span> c_id <span class=\"operator\">=</span> <span class=\"number\">3</span> <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> course;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> course <span class=\"keyword\">where</span> c_id <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> course;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"default\"><a href=\"#default\" class=\"headerlink\" title=\"default\"></a>default</h4><blockquote>\n<p>default 主表有变更时, 从表将外键列设置成一个默认的值但Innodb不能识别</p>\n</blockquote>\n<h4 id=\"总结：\"><a href=\"#总结：\" class=\"headerlink\" title=\"总结：\"></a>总结：</h4><blockquote>\n<p>主表更新从表同步，主表删除从表set null</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> student;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> course;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> course (</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;专业编号&#x27;</span>,</span><br><span class=\"line\">    c_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (c_id)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> course (c_name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;大数据&#x27;</span>),(<span class=\"string\">&#x27;人工智能&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">    stu_id <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;学生编号&#x27;</span>,</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) comment <span class=\"string\">&#x27;学生姓名&#x27;</span>,</span><br><span class=\"line\">    c_id <span class=\"type\">int</span> comment <span class=\"string\">&#x27;专业名称&#x27;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (stu_id),</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> fk_course_student <span class=\"keyword\">foreign</span> key (c_id) <span class=\"keyword\">references</span> course (c_id) <span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> <span class=\"keyword\">set</span> <span class=\"keyword\">null</span> <span class=\"keyword\">on</span> <span class=\"keyword\">update</span> cascade</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student (stu_name, c_id) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">2</span>),(<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"number\">1</span>),(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"修改表\"><a href=\"#修改表\" class=\"headerlink\" title=\"修改表\"></a>修改表</h2><h3 id=\"修改表名称\"><a href=\"#修改表名称\" class=\"headerlink\" title=\"修改表名称\"></a>修改表名称</h3><blockquote>\n<p>格式 alter table 旧表名称 rename to 新表名称</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> tb_user rename <span class=\"keyword\">to</span>  <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> tables;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改字段数据类型\"><a href=\"#修改字段数据类型\" class=\"headerlink\" title=\"修改字段数据类型\"></a>修改字段数据类型</h3><blockquote>\n<p>格式 alter table 表名称 modify  字段名称 新的数据类型</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> modify user_name <span class=\"type\">char</span>(<span class=\"number\">20</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改字段数据约束\"><a href=\"#修改字段数据约束\" class=\"headerlink\" title=\"修改字段数据约束\"></a>修改字段数据约束</h3><blockquote>\n<p>格式 alter table 表名称 modify  字段名称 新数据类型 新约束</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> modify user_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;姓名&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改字段名称\"><a href=\"#修改字段名称\" class=\"headerlink\" title=\"修改字段名称\"></a>修改字段名称</h3><blockquote>\n<p>格式 alter table 表名称 change  旧字段名称 新字段名称 新数据类型 新约束</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> change user_name name <span class=\"type\">char</span>(<span class=\"number\">20</span>) <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;姓名&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加字段\"><a href=\"#添加字段\" class=\"headerlink\" title=\"添加字段\"></a>添加字段</h3><blockquote>\n<p>格式 alter table 表名称 add 字段名称 数据类型 约束</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> gender enum(<span class=\"string\">&#x27;F&#x27;</span>,<span class=\"string\">&#x27;M&#x27;</span>) <span class=\"keyword\">default</span> <span class=\"string\">&#x27;M&#x27;</span> comment <span class=\"string\">&#x27;性别 F代表女 M代表男 默认值M&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> date_of_birth <span class=\"type\">date</span> comment <span class=\"string\">&#x27;出生日期&#x27;</span> <span class=\"keyword\">first</span>;</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> id_card <span class=\"type\">char</span>(<span class=\"number\">18</span>) comment <span class=\"string\">&#x27;身份证&#x27;</span> after user_id;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除字段\"><a href=\"#删除字段\" class=\"headerlink\" title=\"删除字段\"></a>删除字段</h3><blockquote>\n<p>格式 alter table 表名称 drop 字段名称</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">drop</span> date_of_birth;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"调整字段位置\"><a href=\"#调整字段位置\" class=\"headerlink\" title=\"调整字段位置\"></a>调整字段位置</h3><blockquote>\n<p>格式 alter table 表名称 modify 字段名称 数据类型 约束 位置</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> modify id_card <span class=\"type\">char</span>(<span class=\"number\">18</span>) <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;身份证&#x27;</span>  <span class=\"keyword\">first</span>;</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> modify user_id <span class=\"type\">int</span> <span class=\"keyword\">not</span> <span class=\"keyword\">null</span> comment <span class=\"string\">&#x27;用户编号&#x27;</span> after name;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改存储引擎\"><a href=\"#修改存储引擎\" class=\"headerlink\" title=\"修改存储引擎\"></a>修改存储引擎</h3><blockquote>\n<p>格式 alter table 表名称 engine &#x3D; 引擎名称</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span>  <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> engine <span class=\"operator\">=</span> myisam;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span>  <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改字符集\"><a href=\"#修改字符集\" class=\"headerlink\" title=\"修改字符集\"></a>修改字符集</h3><blockquote>\n<p>格式 alter table 表名称 character set  字符集名称</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span>  <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"type\">character</span> <span class=\"keyword\">set</span> gbk;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span>  <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"数据备份与还原\"><a href=\"#数据备份与还原\" class=\"headerlink\" title=\"数据备份与还原\"></a>数据备份与还原</h2><h3 id=\"数据备份\"><a href=\"#数据备份\" class=\"headerlink\" title=\"数据备份\"></a>数据备份</h3><blockquote>\n<p>使用 <code>mysqldump</code></p>\n<p>格式：<code>msyqldump</code> 需要备份的数据库名称 -h 服务器地址 -u 账号 -p · 备份文件存储路径</p>\n</blockquote>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">C:\\<span class=\"title\">Users</span>\\<span class=\"title\">Administrator</span>&gt;<span class=\"title\">mysqldump</span> <span class=\"title\">chap01</span> -<span class=\"title\">h</span> <span class=\"title\">localhost</span>  -<span class=\"title\">uroot</span> -<span class=\"title\">p</span> &gt; <span class=\"title\">d</span>:\\<span class=\"title\">chap01.sql</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Enter</span> <span class=\"title\">password</span>: ******</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">C</span>:\\<span class=\"title\">Users</span>\\<span class=\"title\">Administrator</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"数据还原\"><a href=\"#数据还原\" class=\"headerlink\" title=\"数据还原\"></a>数据还原</h3><blockquote>\n<ol>\n<li><p>使用 <code>mysql</code> 格式  <code>mysql</code> 需要被还原的库 -h 服务器地址 -u 账号 -p &lt; sql文件存储路径</p>\n</li>\n<li><p>使用 <code>source</code> 格式  <code>source</code>  sql文件存储路径 </p>\n<p>注意：<code>source</code> 需要在mysql命令行下在需要被环境的数据库执行</p>\n</li>\n</ol>\n</blockquote>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">C:\\<span class=\"title\">Users</span>\\<span class=\"title\">Administrator</span>&gt;<span class=\"title\">mysql</span> <span class=\"title\">chap01</span> -<span class=\"title\">h</span> <span class=\"title\">localhost</span> -<span class=\"title\">uroot</span> -<span class=\"title\">p</span> &lt; <span class=\"title\">d</span>:\\<span class=\"title\">chap01.sql</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Enter</span> <span class=\"title\">password</span>: ******</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">C</span>:\\<span class=\"title\">Users</span>\\<span class=\"title\">Administrator</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\Administrator<span class=\"operator\">&gt;</span>mysql <span class=\"operator\">-</span>h localhost <span class=\"operator\">-</span>uroot <span class=\"operator\">-</span>p</span><br><span class=\"line\">Enter password: <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span></span><br><span class=\"line\">Welcome <span class=\"keyword\">to</span> the MySQL monitor.  Commands <span class=\"keyword\">end</span> <span class=\"keyword\">with</span> ; <span class=\"keyword\">or</span> \\g.</span><br><span class=\"line\">Your MySQL connection id <span class=\"keyword\">is</span> <span class=\"number\">32</span></span><br><span class=\"line\">Server version: <span class=\"number\">9.0</span><span class=\"number\">.1</span> MySQL Community Server <span class=\"operator\">-</span> GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) <span class=\"number\">2000</span>, <span class=\"number\">2024</span>, Oracle <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle <span class=\"keyword\">is</span> a registered trademark <span class=\"keyword\">of</span> Oracle Corporation <span class=\"keyword\">and</span><span class=\"operator\">/</span><span class=\"keyword\">or</span> its</span><br><span class=\"line\">affiliates. Other names may be trademarks <span class=\"keyword\">of</span> their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> <span class=\"keyword\">or</span> <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> <span class=\"keyword\">to</span> clear the <span class=\"keyword\">current</span> input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> use chap01;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> source d:<span class=\"operator\">/</span>chap01.sql;</span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：windows 路劲分隔符</p>\n<p>d:&#x2F;chap01.sql;</p>\n<p>d:<code>\\\\</code>chap01.sql;</p>\n</blockquote>\n<h2 id=\"数据库查询语言-DQL\"><a href=\"#数据库查询语言-DQL\" class=\"headerlink\" title=\"数据库查询语言 DQL\"></a>数据库查询语言 DQL</h2><p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20220624085238889.png\" alt=\"image-20220624085238889\"></p>\n<h3 id=\"准备数据\"><a href=\"#准备数据\" class=\"headerlink\" title=\"准备数据\"></a>准备数据</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">C:\\<span class=\"title\">Users</span>\\<span class=\"title\">Administrator</span>&gt; <span class=\"title\">mysql</span> -<span class=\"title\">uroot</span> -<span class=\"title\">p</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Enter</span> <span class=\"title\">password</span>: ******</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Welcome</span> <span class=\"title\">to</span> <span class=\"title\">the</span> <span class=\"title\">MySQL</span> <span class=\"title\">monitor</span>.  <span class=\"title\">Commands</span> <span class=\"title\">end</span> <span class=\"title\">with</span> ; <span class=\"title\">or</span> \\<span class=\"title\">g</span>.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Your</span> <span class=\"title\">MySQL</span> <span class=\"title\">connection</span> <span class=\"title\">id</span> <span class=\"title\">is</span> 20</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Server</span> <span class=\"title\">version</span>: 8.0.34 <span class=\"title\">MySQL</span> <span class=\"title\">Community</span> <span class=\"title\">Server</span> - <span class=\"title\">GPL</span></span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Copyright</span> (<span class=\"title\">c</span>) 2000, 2023, <span class=\"title\">Oracle</span> <span class=\"title\">and</span>/<span class=\"title\">or</span> <span class=\"title\">its</span> <span class=\"title\">affiliates</span>.</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Oracle</span> <span class=\"title\">is</span> <span class=\"title\">a</span> <span class=\"title\">registered</span> <span class=\"title\">trademark</span> <span class=\"title\">of</span> <span class=\"title\">Oracle</span> <span class=\"title\">Corporation</span> <span class=\"title\">and</span>/<span class=\"title\">or</span> <span class=\"title\">its</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">affiliates</span>. <span class=\"title\">Other</span> <span class=\"title\">names</span> <span class=\"title\">may</span> <span class=\"title\">be</span> <span class=\"title\">trademarks</span> <span class=\"title\">of</span> <span class=\"title\">their</span> <span class=\"title\">respective</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">owners</span>.</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Type</span> &#x27;<span class=\"title\">help</span>;&#x27; <span class=\"title\">or</span> &#x27;\\<span class=\"title\">h</span>&#x27; <span class=\"title\">for</span> <span class=\"title\">help</span>. <span class=\"title\">Type</span> &#x27;\\<span class=\"title\">c</span>&#x27; <span class=\"title\">to</span> <span class=\"title\">clear</span> <span class=\"title\">the</span> <span class=\"title\">current</span> <span class=\"title\">input</span> <span class=\"title\">statement</span>.</span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">mysql</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> database chap02;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use chap02;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source d:<span class=\"operator\">/</span>chap02_data.sql;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"单表查询\"><a href=\"#单表查询\" class=\"headerlink\" title=\"单表查询\"></a>单表查询</h3><h4 id=\"查询所有\"><a href=\"#查询所有\" class=\"headerlink\" title=\"查询所有\"></a>查询所有</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"按字段查询\"><a href=\"#按字段查询\" class=\"headerlink\" title=\"按字段查询\"></a>按字段查询</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.3</span><span class=\"number\">.1</span> 查询香蕉的价格</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;banana&#x27;</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.3</span><span class=\"number\">.2</span> 查询价格为<span class=\"number\">10.30</span>的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"operator\">=</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.3</span><span class=\"number\">.4</span> 查询价格 高于<span class=\"number\">5.2</span> 低于<span class=\"number\">10.30</span> 的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"operator\">&gt;</span> <span class=\"number\">5.2</span> <span class=\"operator\">&amp;&amp;</span> f_price <span class=\"operator\">&lt;</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"operator\">&gt;</span> <span class=\"number\">5.2</span> <span class=\"keyword\">and</span> f_price <span class=\"operator\">&lt;</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"operator\">&gt;=</span> <span class=\"number\">5.2</span> <span class=\"operator\">&amp;&amp;</span> f_price <span class=\"operator\">&lt;=</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"operator\">&gt;=</span> <span class=\"number\">5.2</span> <span class=\"keyword\">and</span> f_price <span class=\"operator\">&lt;=</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.3</span><span class=\"number\">.5</span> 查询价格 高于<span class=\"number\">5.2</span> 低于<span class=\"number\">10.30</span> 的水果</span><br><span class=\"line\"># <span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"operator\">&gt;=</span> <span class=\"number\">5.2</span> <span class=\"keyword\">and</span> f_price <span class=\"operator\">&lt;=</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_price <span class=\"keyword\">between</span> <span class=\"number\">5.2</span> <span class=\"keyword\">and</span> <span class=\"number\">10.30</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.3</span><span class=\"number\">.6</span> 查询供应商 s_id 为 <span class=\"number\">101</span> 和 <span class=\"number\">102</span> 供应的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span> <span class=\"operator\">||</span> s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span> <span class=\"keyword\">or</span> s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"># 查询价格在 <span class=\"number\">5.2</span> 与 <span class=\"number\">10.2</span> 之间 供应商 s_id 为 <span class=\"number\">101</span> 和 <span class=\"number\">102</span> 供应的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price</span><br><span class=\"line\">    <span class=\"keyword\">from</span></span><br><span class=\"line\">        fruit</span><br><span class=\"line\">    <span class=\"keyword\">where</span></span><br><span class=\"line\">        (f_price <span class=\"keyword\">between</span> <span class=\"number\">5.2</span> <span class=\"keyword\">and</span> <span class=\"number\">10.30</span>)</span><br><span class=\"line\">        <span class=\"keyword\">and</span></span><br><span class=\"line\">        (s_id <span class=\"operator\">=</span> <span class=\"number\">101</span> <span class=\"keyword\">or</span> s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price</span><br><span class=\"line\">    <span class=\"keyword\">from</span></span><br><span class=\"line\">        fruit</span><br><span class=\"line\">    <span class=\"keyword\">where</span></span><br><span class=\"line\">        (s_id <span class=\"operator\">=</span> <span class=\"number\">101</span> <span class=\"keyword\">or</span> s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>)</span><br><span class=\"line\">        <span class=\"keyword\">and</span></span><br><span class=\"line\">        (f_price <span class=\"keyword\">between</span> <span class=\"number\">5.2</span> <span class=\"keyword\">and</span> <span class=\"number\">10.30</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"in-查询\"><a href=\"#in-查询\" class=\"headerlink\" title=\"in 查询\"></a>in 查询</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.4</span><span class=\"number\">.1</span> 查询供应商 s_id 为 <span class=\"number\">101</span> 和 <span class=\"number\">102</span> 供应的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span> <span class=\"keyword\">or</span> s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"keyword\">in</span> ( <span class=\"number\">101</span> , <span class=\"number\">102</span>);</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.4</span><span class=\"number\">.2</span> 查询供应商 s_id 不是 <span class=\"number\">101</span> 和 <span class=\"number\">102</span> 供应的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">!=</span> <span class=\"number\">101</span> <span class=\"keyword\">and</span> s_id <span class=\"operator\">!=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,f_name,f_price <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> ( <span class=\"number\">101</span> , <span class=\"number\">102</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"null-查询\"><a href=\"#null-查询\" class=\"headerlink\" title=\"null 查询\"></a>null 查询</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.5</span><span class=\"number\">.1</span> # 查询没有绑定邮箱的消费者</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> customer <span class=\"keyword\">where</span> c_email <span class=\"keyword\">is</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.5</span><span class=\"number\">.2</span> # 查询没有绑定邮箱的消费者</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> customer <span class=\"keyword\">where</span> c_email <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"模糊查询\"><a href=\"#模糊查询\" class=\"headerlink\" title=\"模糊查询\"></a>模糊查询</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.6</span><span class=\"number\">.1</span> 查询所有名称 b 开头的水果</span><br><span class=\"line\"># <span class=\"operator\">%</span> 代表零个或多个字符</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;b%&#x27;</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.6</span><span class=\"number\">.2</span> 查询所有名称 含有 g 的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%g%&#x27;</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.6</span><span class=\"number\">.3</span> 查询所有名称 b开头 y结尾 的水果</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;b%y&#x27;</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.6</span><span class=\"number\">.4</span> 查询所有名称 y结尾 y的前面有<span class=\"number\">5</span>个字符 的水果</span><br><span class=\"line\"># 一个下划线代表一个字符</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> f_name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;_____y&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.7</span><span class=\"number\">.1</span> 按照水果价格升序显示</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> f_price;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> f_price <span class=\"keyword\">asc</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.7</span><span class=\"number\">.2</span> 按照水果价格降序显示</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> f_price <span class=\"keyword\">desc</span>;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.7</span><span class=\"number\">.3</span> 按照供应商升序 如果供应商相同的情况下按照价格降序</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> s_id,f_price <span class=\"keyword\">desc</span> ;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"聚合函数\"><a href=\"#聚合函数\" class=\"headerlink\" title=\"聚合函数\"></a>聚合函数</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.8</span><span class=\"number\">.1</span><span class=\"number\">.1</span> 统计水果种类数量</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"number\">1</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(f_id) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.8</span><span class=\"number\">.1</span><span class=\"number\">.2</span> 统计消费者人数</span><br><span class=\"line\"># <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) 只有该行有记录就统计</span><br><span class=\"line\"># <span class=\"built_in\">count</span>(字段名) 先判断 该字段的值是否为空 如果为空不在统计范围内</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"number\">1</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> customer;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(c_email) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> customer;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.8</span><span class=\"number\">.2</span> 统计单价最高</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">max</span>(f_price) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;max_price&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"># [<span class=\"number\">42000</span>][<span class=\"number\">1140</span>] <span class=\"keyword\">In</span> aggregated query <span class=\"keyword\">without</span> <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span>, expression #<span class=\"number\">1</span> <span class=\"keyword\">of</span> <span class=\"keyword\">SELECT</span> list <span class=\"keyword\">contains</span> nonaggregated <span class=\"keyword\">column</span> <span class=\"string\">&#x27;chap02.fruit.f_name&#x27;</span>; this <span class=\"keyword\">is</span> incompatible <span class=\"keyword\">with</span> sql_mode<span class=\"operator\">=</span>only_full_group_by</span><br><span class=\"line\"># 解决方法<span class=\"number\">1</span>：修改配置文件 取消严格模式</span><br><span class=\"line\"># 解决方法<span class=\"number\">2</span>：使用 <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> 查询</span><br><span class=\"line\"><span class=\"keyword\">select</span> f_name,<span class=\"built_in\">max</span>(f_price) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;max_price&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.8</span><span class=\"number\">.3</span> 统计单价最低</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">min</span>(f_price) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;min_price&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.8</span><span class=\"number\">.4</span> 统计单价总和</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">sum</span>(f_price) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;sum_price&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.8</span><span class=\"number\">.5</span> 统计平均价格</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">avg</span>(f_price) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;avg_price&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"去重\"><a href=\"#去重\" class=\"headerlink\" title=\"去重\"></a>去重</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.9</span><span class=\"number\">.1</span> 在水果表查询所有供应商 id</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">distinct</span> s_id <span class=\"keyword\">from</span> fruit;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.9</span><span class=\"number\">.2</span> 在水果表中统计所有供应商数量</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"keyword\">distinct</span> s_id) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total_s_id&#x27;</span> <span class=\"keyword\">from</span> fruit;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"分组\"><a href=\"#分组\" class=\"headerlink\" title=\"分组\"></a>分组</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.1</span> 每个供应商供应水果种类数量</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> s_id;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.2</span> 每个供应商供应水果种类数量 按照供应水果种类数量降序</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> s_id <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> total <span class=\"keyword\">desc</span> ;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.3</span> 每个供应商供应水果种类数量 按照供应水果种类数量降序 如果供应水果种类数量相同则按照供应商编号降序</span><br><span class=\"line\"><span class=\"keyword\">select</span> s_id,<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;total&#x27;</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> s_id <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> total <span class=\"keyword\">desc</span> ,s_id <span class=\"keyword\">desc</span> ;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.4</span> 每笔消费的总金额</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> orderitem;</span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.4</span><span class=\"number\">.1</span> 计算每笔流水的小计 小计  <span class=\"operator\">=</span> 数量 × 单价</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.4</span><span class=\"number\">.2</span> 计算每笔流水的的小计 小计  <span class=\"operator\">=</span> 数量 × 单价 分组</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.4</span><span class=\"number\">.3</span> 计算每笔流水的总金额 小计的和</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/消费清单.png\" alt=\"消费清单\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.5</span> 每笔消费的总金额 降序</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.2</span><span class=\"number\">.10</span><span class=\"number\">.6</span> 每笔消费的总金额 高于<span class=\"number\">200</span> 降序</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"分页查询\"><a href=\"#分页查询\" class=\"headerlink\" title=\"分页查询\"></a>分页查询</h4><p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/分页.png\" alt=\"分页\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- LIMIT 起始位置 , 查询数量</span></span><br><span class=\"line\"><span class=\"comment\">-- (查询页面号 - 1) * 每页记录数 = 起始位置</span></span><br><span class=\"line\"><span class=\"comment\">-- 总页数 = if(总记录数 % 每页记录数 == 0) ? 总记录数 / 每页记录数 : (总记录数 / 每页记录数) + 1</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit limit <span class=\"number\">0</span> , <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit limit <span class=\"number\">5</span>, <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit limit <span class=\"number\">50</span>, <span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>符号</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>比较查询</td>\n<td>&gt;，&lt;，&lt;&#x3D;，&gt;&#x3D;，&#x3D;，!&#x3D;</td>\n</tr>\n<tr>\n<td>范围查询</td>\n<td>between and， in，limit</td>\n</tr>\n<tr>\n<td>模糊查询</td>\n<td>like</td>\n</tr>\n<tr>\n<td>null查询</td>\n<td>is null，is not null</td>\n</tr>\n<tr>\n<td>逻辑查询</td>\n<td>and，or，!&#x3D;</td>\n</tr>\n</tbody></table>\n<ol>\n<li>sql语句编写顺序 select 字段 from 表名 where 条件 group by having order by limit</li>\n<li>sql语句执行顺序  from表 -&gt; where -&gt; group by -&gt; having -&gt; order by -&gt; limit</li>\n</ol>\n<h3 id=\"多表查询\"><a href=\"#多表查询\" class=\"headerlink\" title=\"多表查询\"></a>多表查询</h3><p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20220624085238889.png\" alt=\"image-20220624085238889\"></p>\n<h4 id=\"子查询\"><a href=\"#子查询\" class=\"headerlink\" title=\"子查询\"></a>子查询</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.3</span><span class=\"number\">.1</span> 子查询 查找水果名为苹果的供应商名 子查询方式查找</span><br><span class=\"line\"># 子查询 （嵌套结构）</span><br><span class=\"line\"># 子查询嵌入在主查询中</span><br><span class=\"line\"># 子查询辅助主查询，要么充当条件，要么充当数据源（数据表）</span><br><span class=\"line\"># 子查询可以是独立的语句，自己就是一条完整的 <span class=\"keyword\">select</span> 语句</span><br><span class=\"line\"># 编写步骤 先写子查询再写主查询最后在将子查询与主查询拼接</span><br><span class=\"line\"><span class=\"keyword\">select</span> s.s_id,s.s_name <span class=\"keyword\">from</span> supplier s <span class=\"keyword\">where</span> s.s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> f.s_id,f.f_name <span class=\"keyword\">from</span> fruit f <span class=\"keyword\">where</span> f_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;apple&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> s.s_id,s.s_name <span class=\"keyword\">from</span> supplier s <span class=\"keyword\">where</span> s.s_id <span class=\"operator\">=</span> (<span class=\"keyword\">select</span> f.s_id <span class=\"keyword\">from</span> fruit f <span class=\"keyword\">where</span> f_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;apple&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 练习： 每笔消费的总金额 高于<span class=\"number\">200</span> 的订单的消费者信息</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> customer <span class=\"keyword\">where</span> c_id <span class=\"keyword\">in</span> (</span><br><span class=\"line\">    <span class=\"keyword\">select</span> c_id <span class=\"keyword\">from</span> `<span class=\"keyword\">order</span>` <span class=\"keyword\">where</span> o_num <span class=\"keyword\">in</span> (</span><br><span class=\"line\">        <span class=\"keyword\">select</span> o_num <span class=\"keyword\">from</span> orderitem <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> o_num <span class=\"keyword\">having</span> <span class=\"built_in\">sum</span>((quantity <span class=\"operator\">*</span> item_price)) <span class=\"operator\">&gt;</span> <span class=\"number\">200</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"交叉查询-cross-join\"><a href=\"#交叉查询-cross-join\" class=\"headerlink\" title=\"交叉查询 cross join\"></a>交叉查询 cross join</h4><blockquote>\n<p>产生笛卡儿积</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`s_name`,</span><br><span class=\"line\">\t`s_city`,</span><br><span class=\"line\">\t`s_zip`,</span><br><span class=\"line\">\t`s_call`,</span><br><span class=\"line\">\t`s`.`s_id`,</span><br><span class=\"line\">\t`f`.`s_id`,</span><br><span class=\"line\">\t`f_id`,</span><br><span class=\"line\">\t`f_name`,</span><br><span class=\"line\">\t`f_price`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`supplier` <span class=\"keyword\">AS</span> s,</span><br><span class=\"line\">\t`fruit` <span class=\"keyword\">AS</span> f</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927171038604.png\" alt=\"image-20230927171038604\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`s_name`,</span><br><span class=\"line\">\t`s_city`,</span><br><span class=\"line\">\t`s_zip`,</span><br><span class=\"line\">\t`s_call`,</span><br><span class=\"line\">\t`s`.`s_id`,</span><br><span class=\"line\">\t`f`.`s_id`,</span><br><span class=\"line\">\t`f_id`,</span><br><span class=\"line\">\t`f_name`,</span><br><span class=\"line\">\t`f_price`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`supplier` <span class=\"keyword\">AS</span> s,</span><br><span class=\"line\">\t`fruit` <span class=\"keyword\">AS</span> f</span><br><span class=\"line\"><span class=\"keyword\">where</span> s.s_id <span class=\"operator\">=</span> f.s_id;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t`s_name`,</span><br><span class=\"line\">\t`s_city`,</span><br><span class=\"line\">\t`s_zip`,</span><br><span class=\"line\">\t`s_call`,</span><br><span class=\"line\">\t`s`.`s_id`,</span><br><span class=\"line\">\t`f`.`s_id`,</span><br><span class=\"line\">\t`f_id`,</span><br><span class=\"line\">\t`f_name`,</span><br><span class=\"line\">\t`f_price`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t`supplier` <span class=\"keyword\">AS</span> s <span class=\"keyword\">cross</span> <span class=\"keyword\">join</span> `fruit` <span class=\"keyword\">AS</span> f</span><br><span class=\"line\"><span class=\"keyword\">where</span> s.s_id <span class=\"operator\">=</span> f.s_id;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927171754601.png\" alt=\"image-20230927171754601\"></p>\n<h4 id=\"内连接-inner-join\"><a href=\"#内连接-inner-join\" class=\"headerlink\" title=\"内连接 inner join\"></a>内连接 inner join</h4><blockquote>\n<ul>\n<li>关键字 INNER JOIN</li>\n<li>连接查询条件 ON</li>\n</ul>\n</blockquote>\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/inner.png\" alt=\"inner\"></p>\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927174128316.png\" alt=\"image-20230927174128316\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> `<span class=\"keyword\">order</span>` o <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> customer c <span class=\"keyword\">on</span> o.c_id <span class=\"operator\">=</span> c.c_id;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927174405650.png\" alt=\"image-20230927174405650\"></p>\n<h4 id=\"左外连接-left-outer-join\"><a href=\"#左外连接-left-outer-join\" class=\"headerlink\" title=\"左外连接 left outer join\"></a>左外连接 left outer join</h4><blockquote>\n<p>以左表为主根据条件查询右表数据，如果根据条件查询右表数据不存在使用null值填充</p>\n</blockquote>\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/left.png\" alt=\"left\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> `<span class=\"keyword\">order</span>` o <span class=\"keyword\">left</span> <span class=\"keyword\">outer</span> <span class=\"keyword\">join</span> customer c <span class=\"keyword\">on</span> o.c_id <span class=\"operator\">=</span> c.c_id;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927180306948.png\" alt=\"image-20230927180306948\"></p>\n<h4 id=\"右外连接-right-outer-join\"><a href=\"#右外连接-right-outer-join\" class=\"headerlink\" title=\"右外连接 right outer join\"></a>右外连接 right outer join</h4><blockquote>\n<p>以右表为主根据条件查询右表数据，如果根据条件查询左表数据不存在使用null值填充</p>\n</blockquote>\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/right.png\" alt=\"right\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> `<span class=\"keyword\">order</span>` o <span class=\"keyword\">right</span> <span class=\"keyword\">outer</span> <span class=\"keyword\">join</span> customer c <span class=\"keyword\">on</span> o.c_id <span class=\"operator\">=</span> c.c_id;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927180451212.png\" alt=\"image-20230927180451212\"></p>\n<h4 id=\"全连接-full-join\"><a href=\"#全连接-full-join\" class=\"headerlink\" title=\"全连接 full join\"></a>全连接 full join</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>的作用</span><br><span class=\"line\"># 在关系型数据库中，我们经常需要将两个或多个表格中的数据进行合并。</span><br><span class=\"line\"># <span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>是一种将两个表格中的所有数据进行合并的操作，包括左表格、右表格以及两个表格中都存在的数据。</span><br><span class=\"line\"># <span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>可以帮助我们更好地理解数据之间的关系，从而更加高效地进行数据分析和处理。</span><br><span class=\"line\"></span><br><span class=\"line\"># MySQL中没有<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>的原因</span><br><span class=\"line\"># 尽管<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>在关系型数据库中非常有用，但是MySQL并不支持<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>操作。</span><br><span class=\"line\"># 这是因为MySQL采用的是基于左表格和右表格的<span class=\"keyword\">JOIN</span>操作，而没有提供<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>的实现方式。</span><br><span class=\"line\"># 因此，如果我们需要使用<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>操作，就需要通过其他方式来实现。</span><br><span class=\"line\"># 虽然MySQL不支持<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>操作，但是我们可以通过使用<span class=\"keyword\">UNION</span>和<span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span>操作来实现<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>的效果。具体方法如下：</span><br><span class=\"line\"># （<span class=\"number\">1</span>）使用<span class=\"keyword\">UNION</span>操作将左表格和右表格中的数据进行合并。</span><br><span class=\"line\"># （<span class=\"number\">2</span>）使用<span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span>操作将左表格和右表格中的数据进行连接，将左表格和右表格中都存在的数据进行合并。</span><br><span class=\"line\"># （<span class=\"number\">3</span>）将<span class=\"keyword\">UNION</span>操作和<span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span>操作的结果进行合并，即可得到<span class=\"keyword\">FULL</span> <span class=\"keyword\">JOIN</span>的结果。</span><br><span class=\"line\"># 需要注意的是，在使用<span class=\"keyword\">UNION</span>操作和<span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span>操作时，我们需要保证两个表格中的数据结构相同，否则可能会出现错误。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"union-all\"><a href=\"#union-all\" class=\"headerlink\" title=\"union all\"></a>union all</h4><p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927182307778.png\" alt=\"image-20230927182307778\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 两张表的数据结构要一致 不会去除重复数据</span><br><span class=\"line\"># 查询水果表中 供应商id 是 <span class=\"number\">101</span> 和 <span class=\"number\">102</span> 水果信息</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span> <span class=\"keyword\">or</span>  s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"keyword\">in</span> (<span class=\"number\">101</span>, <span class=\"number\">102</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span></span><br><span class=\"line\"> <span class=\"keyword\">union</span> <span class=\"keyword\">all</span></span><br><span class=\"line\"> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">102</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span></span><br><span class=\"line\"> <span class=\"keyword\">union</span> <span class=\"keyword\">all</span></span><br><span class=\"line\"> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"union\"><a href=\"#union\" class=\"headerlink\" title=\"union\"></a>union</h4><p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230927182307778.png\" alt=\"image-20230927182307778\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 过滤重复数据</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span></span><br><span class=\"line\"> <span class=\"keyword\">union</span></span><br><span class=\"line\"> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> fruit <span class=\"keyword\">where</span> s_id <span class=\"operator\">=</span> <span class=\"number\">101</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"some-any-all\"><a href=\"#some-any-all\" class=\"headerlink\" title=\"some any all\"></a>some any all</h4><p>![图示_any some](D:&#x2F;dev&#x2F;code&#x2F;vue&#x2F;vue_study&#x2F;bigdata2024&#x2F;MySQL&#x2F;img&#x2F;图示_any some.png)</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.3</span><span class=\"number\">.4</span><span class=\"number\">.1</span> <span class=\"keyword\">some</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl1 <span class=\"keyword\">where</span> num1 <span class=\"operator\">&gt;</span> <span class=\"keyword\">some</span>(<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl2);</span><br><span class=\"line\"># <span class=\"number\">2.3</span><span class=\"number\">.4</span><span class=\"number\">.2</span> <span class=\"keyword\">any</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl1 <span class=\"keyword\">where</span> num1 <span class=\"operator\">&gt;</span> <span class=\"keyword\">any</span>(<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl2);</span><br><span class=\"line\"># <span class=\"number\">2.3</span><span class=\"number\">.4</span><span class=\"number\">.3</span> <span class=\"keyword\">all</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl1 <span class=\"keyword\">where</span> num1 <span class=\"operator\">&gt;</span> <span class=\"keyword\">all</span>(<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tbl2);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"exits\"><a href=\"#exits\" class=\"headerlink\" title=\"exits\"></a>exits</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">2.3</span><span class=\"number\">.5</span> <span class=\"keyword\">exists</span></span><br><span class=\"line\"># 查找供应商 名字 是否存在</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">exists</span> (<span class=\"keyword\">SELECT</span> `s_id` <span class=\"keyword\">FROM</span> `supplier` <span class=\"keyword\">WHERE</span> `s_name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;ACME&#x27;</span> ) <span class=\"keyword\">as</span> isExists;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">exists</span> (<span class=\"keyword\">SELECT</span> `s_id` <span class=\"keyword\">FROM</span> `supplier` <span class=\"keyword\">WHERE</span> `s_name` <span class=\"operator\">=</span> <span class=\"string\">&#x27;李昊哲&#x27;</span> ) <span class=\"keyword\">as</span> isExists;</span><br><span class=\"line\"></span><br><span class=\"line\">#  Can<span class=\"string\">&#x27;t create database &#x27;</span>chap02<span class=\"string\">&#x27;; database exists</span></span><br><span class=\"line\"><span class=\"string\">create database if not exists chap02;</span></span><br><span class=\"line\"><span class=\"string\">drop database if exists chap03;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">create table if not exists login (</span></span><br><span class=\"line\"><span class=\"string\">  id int auto_increment comment &#x27;</span>主键<span class=\"string\">&#x27;,</span></span><br><span class=\"line\"><span class=\"string\">  phone_number varchar(11) unique not null comment &#x27;</span>手机号<span class=\"string\">&#x27;,</span></span><br><span class=\"line\"><span class=\"string\">  primary key (id)</span></span><br><span class=\"line\"><span class=\"string\">);</span></span><br><span class=\"line\"><span class=\"string\">insert into login (phone_number) value (&#x27;</span><span class=\"number\">15311484568</span><span class=\"string\">&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">insert into login (phone_number)</span></span><br><span class=\"line\"><span class=\"string\"> select &#x27;</span><span class=\"number\">15311484568</span><span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\"> where not exists</span></span><br><span class=\"line\"><span class=\"string\">     (select phone_number from login where phone_number = &#x27;</span><span class=\"number\">15311484568</span><span class=\"string\">&#x27;);</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">insert into login (phone_number)</span></span><br><span class=\"line\"><span class=\"string\"> select &#x27;</span><span class=\"number\">18515697037</span><span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\"> where not exists</span></span><br><span class=\"line\"><span class=\"string\">     (select phone_number from login where phone_number = &#x27;</span><span class=\"number\">18515697037</span><span class=\"string\">&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">select * from login;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"自关联查询\"><a href=\"#自关联查询\" class=\"headerlink\" title=\"自关联查询\"></a>自关联查询</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">desc</span> region_address;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> region_address <span class=\"keyword\">where</span> region_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;河南&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> region_address <span class=\"keyword\">where</span> parent_code <span class=\"operator\">=</span> <span class=\"number\">41</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> region_address <span class=\"keyword\">where</span> parent_code <span class=\"operator\">=</span> <span class=\"number\">4107</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"练习\"><a href=\"#练习\" class=\"headerlink\" title=\"练习\"></a>练习</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_category;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> tb_category;</span><br><span class=\"line\"># 子查询作为查询条件</span><br><span class=\"line\"># 一级导航</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"># 二级导航</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"keyword\">in</span> (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>);</span><br><span class=\"line\"># 二级导航</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"keyword\">in</span> (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"keyword\">in</span> (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"># 子查询作为数据源 也就是 当中一张数据表看待</span><br><span class=\"line\"># 一级导航</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"># 二级导航</span><br><span class=\"line\"><span class=\"keyword\">select</span> t1.id,name,goods_num,is_menu,is_menu,seq,parent_id,template_id <span class=\"keyword\">from</span> tb_category t1</span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">    (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>) t2</span><br><span class=\"line\">    <span class=\"keyword\">on</span> t1.parent_id <span class=\"operator\">=</span> t2.id;</span><br><span class=\"line\"># 将一级导航和该导航下的二级导航数据封装一次性送到前端</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> t1.id,name,goods_num,is_menu,is_menu,seq,parent_id,template_id <span class=\"keyword\">from</span> tb_category t1</span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">    (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>) t2</span><br><span class=\"line\">    <span class=\"keyword\">on</span> t1.parent_id <span class=\"operator\">=</span> t2.id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> parent_id,group_concat(id) <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span> <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> parent_id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> t4.id,name,goods_num,is_menu,is_menu,seq,t4.parent_id,template_id,t3.ids,t3.names <span class=\"keyword\">from</span> tb_category t4 <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">    (</span><br><span class=\"line\">        <span class=\"keyword\">select</span> parent_id,group_concat(t1.id) ids,group_concat(t1.name) names <span class=\"keyword\">from</span> tb_category t1</span><br><span class=\"line\">        <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">        (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>) t2</span><br><span class=\"line\">        <span class=\"keyword\">on</span> t1.parent_id <span class=\"operator\">=</span> t2.id</span><br><span class=\"line\">        <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> parent_id</span><br><span class=\"line\">    ) t3</span><br><span class=\"line\">    <span class=\"keyword\">on</span> t3.parent_id <span class=\"operator\">=</span> t4.id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> t4.id,name,goods_num,is_menu,is_menu,seq,t4.parent_id,template_id,t3.ids,t3.names <span class=\"keyword\">from</span> tb_category t4 <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">    (</span><br><span class=\"line\">        <span class=\"keyword\">select</span> parent_id,<span class=\"built_in\">json_array</span>(group_concat(t1.id)) ids,<span class=\"built_in\">json_array</span>(group_concat(t1.name)) names <span class=\"keyword\">from</span> tb_category t1</span><br><span class=\"line\">        <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">        (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>) t2</span><br><span class=\"line\">        <span class=\"keyword\">on</span> t1.parent_id <span class=\"operator\">=</span> t2.id</span><br><span class=\"line\">        <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> parent_id</span><br><span class=\"line\">    ) t3</span><br><span class=\"line\">    <span class=\"keyword\">on</span> t3.parent_id <span class=\"operator\">=</span> t4.id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> t4.id,name,goods_num,is_menu,is_menu,seq,t4.parent_id,template_id,<span class=\"built_in\">json_array</span>(t3.ids) id_list,<span class=\"built_in\">json_array</span>(t3.names) name_list <span class=\"keyword\">from</span> tb_category t4 <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">    (</span><br><span class=\"line\">        <span class=\"keyword\">select</span> parent_id,group_concat(t1.id) ids,group_concat(t1.name) names <span class=\"keyword\">from</span> tb_category t1</span><br><span class=\"line\">        <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span></span><br><span class=\"line\">        (<span class=\"keyword\">select</span> id <span class=\"keyword\">from</span> tb_category <span class=\"keyword\">where</span> parent_id <span class=\"operator\">=</span> <span class=\"number\">0</span>) t2</span><br><span class=\"line\">        <span class=\"keyword\">on</span> t1.parent_id <span class=\"operator\">=</span> t2.id</span><br><span class=\"line\">        <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> parent_id</span><br><span class=\"line\">    ) t3</span><br><span class=\"line\">    <span class=\"keyword\">on</span> t3.parent_id <span class=\"operator\">=</span> t4.id;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1</span>、函数</span><br><span class=\"line\"># 数学函数、字符串函数、日期时间函数、条件判断、循环函数、系统信息函数、加密解密函数、开窗函数</span><br><span class=\"line\"># <span class=\"number\">1.1</span> 准备数据</span><br><span class=\"line\"># mysql <span class=\"operator\">-</span>uroot <span class=\"operator\">-</span>p</span><br><span class=\"line\"><span class=\"keyword\">create</span> database chap03;</span><br><span class=\"line\">use chap03;</span><br><span class=\"line\">source d:<span class=\"operator\">/</span>chap03_data.sql;</span><br><span class=\"line\"><span class=\"keyword\">show</span> tables;</span><br><span class=\"line\"># dual</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"string\">&#x27;勿忘国耻，振兴中华&#x27;</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;slogan&#x27;</span> <span class=\"keyword\">from</span> dual;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"聚合函数-1\"><a href=\"#聚合函数-1\" class=\"headerlink\" title=\"聚合函数\"></a>聚合函数</h3><h3 id=\"数学函数\"><a href=\"#数学函数\" class=\"headerlink\" title=\"数学函数\"></a>数学函数</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.3</span> 数学函数</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.1</span> 绝对值</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">abs</span>(<span class=\"number\">3</span>),<span class=\"built_in\">abs</span>(<span class=\"number\">-3</span>),<span class=\"built_in\">abs</span>(<span class=\"number\">-3.3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.2</span> 圆周率</span><br><span class=\"line\"><span class=\"keyword\">select</span> pi() <span class=\"keyword\">as</span> <span class=\"string\">&#x27;pi&#x27;</span> <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.3</span> 平方根</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">sqrt</span>(<span class=\"number\">9</span>),<span class=\"built_in\">sqrt</span>(<span class=\"number\">20</span>),<span class=\"built_in\">sqrt</span>(<span class=\"number\">-9</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.4</span> 取模运算</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">mod</span>(<span class=\"number\">9</span>,<span class=\"number\">2</span>),<span class=\"built_in\">mod</span>(<span class=\"number\">6</span>,<span class=\"number\">2</span>),<span class=\"built_in\">mod</span>(<span class=\"number\">-6</span>,<span class=\"number\">2</span>),<span class=\"built_in\">mod</span>(<span class=\"number\">-9</span>,<span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.5</span> 向上取整</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">ceil</span>(<span class=\"number\">3.3</span>),<span class=\"built_in\">ceil</span>(<span class=\"number\">-3.9</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.6</span> 向上取整</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">floor</span>(<span class=\"number\">3.9</span>),<span class=\"built_in\">floor</span>(<span class=\"number\">-3.3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.7</span> 四舍五入 (x,y) x 是原始值 y 保留小数后面几位</span><br><span class=\"line\"><span class=\"keyword\">select</span> round(<span class=\"number\">3.9</span>),round(<span class=\"number\">3.3</span>),round(<span class=\"number\">-3.9</span>),round(<span class=\"number\">-3.3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> round(<span class=\"number\">3.1415926</span>,<span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> round(<span class=\"number\">3.145</span>,<span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.8</span> 随机数 范围 <span class=\"number\">0</span><span class=\"operator\">~</span><span class=\"number\">1</span>之间的小数</span><br><span class=\"line\"><span class=\"keyword\">select</span> rand(),rand(),rand() <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> round(rand() ,<span class=\"number\">2</span>),round(rand() ,<span class=\"number\">2</span>),round(rand() ,<span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.9</span> 随机数 参数x 最接近参数x的随机值</span><br><span class=\"line\"><span class=\"keyword\">select</span> rand(<span class=\"number\">10</span>),rand(<span class=\"number\">-10</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.10</span> 符号函数 参数值为整数、零、负数返回结果依次为<span class=\"number\">1</span>、<span class=\"number\">0</span>、<span class=\"number\">-1</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> sign(<span class=\"number\">3</span>), sign(<span class=\"number\">0</span>) ,sign(<span class=\"number\">-3</span>)<span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.11</span> 幂运算函数</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.11</span><span class=\"number\">.1</span> 幂运算函数 (x,y)</span><br><span class=\"line\"><span class=\"keyword\">select</span> pow(<span class=\"number\">2</span>,<span class=\"number\">2</span>),pow(<span class=\"number\">3</span>,<span class=\"number\">3</span>), pow(<span class=\"number\">2</span>,<span class=\"number\">-2</span>),pow(<span class=\"number\">-2</span>,<span class=\"number\">2</span>),pow(<span class=\"number\">-2</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.11</span><span class=\"number\">.2</span> 幂运算函数 (x,y)</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">power</span>(<span class=\"number\">2</span>,<span class=\"number\">2</span>),<span class=\"built_in\">power</span>(<span class=\"number\">3</span>,<span class=\"number\">3</span>), <span class=\"built_in\">power</span>(<span class=\"number\">2</span>,<span class=\"number\">-2</span>),<span class=\"built_in\">power</span>(<span class=\"number\">-2</span>,<span class=\"number\">2</span>),<span class=\"built_in\">power</span>(<span class=\"number\">-2</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.11</span><span class=\"number\">.3</span> 幂运算函数 e 的乘方</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">exp</span>(<span class=\"number\">2</span>),<span class=\"built_in\">exp</span>(<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.12</span> 对数运算函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">log</span>(<span class=\"number\">3</span>),<span class=\"built_in\">log</span>(<span class=\"number\">0</span>),<span class=\"built_in\">log</span>(<span class=\"number\">-3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.13</span> 角度与弧度互转函数</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.13</span><span class=\"number\">.1</span> 角度转弧度</span><br><span class=\"line\"><span class=\"keyword\">select</span> radians(<span class=\"number\">90</span>),radians(<span class=\"number\">180</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.13</span><span class=\"number\">.2</span> 弧度转角度</span><br><span class=\"line\"><span class=\"keyword\">select</span> degrees(pi()),degrees(pi()<span class=\"operator\">/</span><span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.14</span> 正弦函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">sin</span>(<span class=\"number\">0</span>),<span class=\"built_in\">sin</span>(<span class=\"number\">1</span>),<span class=\"built_in\">sin</span>(pi()) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.15</span> 正余弦函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">cos</span>(<span class=\"number\">0</span>),<span class=\"built_in\">cos</span>(<span class=\"number\">1</span>),<span class=\"built_in\">cos</span>(pi()) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.16</span> 余弦函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">acos</span>(<span class=\"number\">0</span>),<span class=\"built_in\">acos</span>(<span class=\"number\">1</span>),<span class=\"built_in\">acos</span>(pi()) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.17</span> 正切函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">tan</span>(<span class=\"number\">0.3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.18</span> 反正切函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">atan</span>(<span class=\"number\">0.3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.3</span><span class=\"number\">.19</span> 反正切函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> cot(<span class=\"number\">3.23</span>) <span class=\"keyword\">from</span> dual;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"字符串函数\"><a href=\"#字符串函数\" class=\"headerlink\" title=\"字符串函数\"></a>字符串函数</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.4</span> 字符串函数</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.1</span> <span class=\"keyword\">char_length</span> 计算字符串字符数量</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;我爱你中国&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.2</span> length 计算字符串长度 单位字节</span><br><span class=\"line\"><span class=\"keyword\">select</span> length(<span class=\"string\">&#x27;我爱你中国&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;I love China&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> length(<span class=\"string\">&#x27;I love China&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.3</span> concat 字符串拼接</span><br><span class=\"line\"><span class=\"keyword\">select</span> concat(<span class=\"string\">&#x27;I&#x27;</span>,<span class=\"string\">&#x27; &#x27;</span>, <span class=\"string\">&#x27;love&#x27;</span>, <span class=\"string\">&#x27; &#x27;</span>, <span class=\"string\">&#x27;China&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> concat(<span class=\"string\">&#x27;1983&#x27;</span>,<span class=\"string\">&#x27;-&#x27;</span>, <span class=\"string\">&#x27;11&#x27;</span>, <span class=\"string\">&#x27;-&#x27;</span>, <span class=\"string\">&#x27;22&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># 注意：在oracle中concat只能传两个参数</span><br><span class=\"line\"><span class=\"keyword\">select</span> concat(<span class=\"string\">&#x27;1983&#x27;</span>,concat(<span class=\"string\">&#x27;-&#x27;</span>,concat(<span class=\"string\">&#x27;11&#x27;</span>,concat(<span class=\"string\">&#x27;-&#x27;</span>, <span class=\"string\">&#x27;22&#x27;</span>)))) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># oracle 语法 <span class=\"keyword\">select</span> <span class=\"string\">&#x27;1983&#x27;</span><span class=\"operator\">||</span><span class=\"string\">&#x27;-&#x27;</span><span class=\"operator\">||</span><span class=\"string\">&#x27;11&#x27;</span><span class=\"operator\">||</span><span class=\"string\">&#x27;-&#x27;</span><span class=\"operator\">||</span><span class=\"string\">&#x27;22&#x27;</span> <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.4</span> concat_ws 带连接符号的字符串拼接 第一个参数为连接符</span><br><span class=\"line\"><span class=\"keyword\">select</span> concat_ws(<span class=\"string\">&#x27;-&#x27;</span>,<span class=\"string\">&#x27;1983&#x27;</span>, <span class=\"string\">&#x27;11&#x27;</span>,<span class=\"string\">&#x27;22&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> concat_ws(<span class=\"string\">&#x27; &#x27;</span>,<span class=\"string\">&#x27;I&#x27;</span>, <span class=\"string\">&#x27;love&#x27;</span>, <span class=\"string\">&#x27;China&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.5</span> <span class=\"keyword\">insert</span> 字符串替换</span><br><span class=\"line\"># 第一个参数是源字符串，第二个参数是该字符串的第几个字符,第三次参数是长度，第四个参数是替换后的内容</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">insert</span> (<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"string\">&#x27;what&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.6</span> lower 字符串中字母转小写</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">lower</span>(<span class=\"string\">&#x27;I Love CHINA&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.7</span> upper 字符串中字母转大写</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">upper</span>(<span class=\"string\">&#x27;i love china&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.8</span> <span class=\"keyword\">left</span> 返回字符串中左边的字符</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">left</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.9</span> <span class=\"keyword\">right</span> 返回字符串中有边的字符</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">right</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">2</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.10</span> lpad 字符串左边填充</span><br><span class=\"line\"># 第一个参数是原字符串 第二个参数填充后的字符串长度 第三个参数是填充值</span><br><span class=\"line\"><span class=\"keyword\">select</span> lpad(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">3</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> lpad(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>) <span class=\"operator\">+</span> <span class=\"number\">3</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># 注意：填充后的长度 如果超过了 源字符串长度<span class=\"operator\">+</span>填充内容长度 填充内容会重复填充</span><br><span class=\"line\"><span class=\"keyword\">select</span> lpad(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>) <span class=\"operator\">+</span> <span class=\"number\">6</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.11</span> rpad 字符串右边填充</span><br><span class=\"line\"><span class=\"keyword\">select</span> rpad(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">3</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> rpad(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>) <span class=\"operator\">+</span> <span class=\"number\">3</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># 注意：填充后的长度 如果超过了 源字符串长度<span class=\"operator\">+</span>填充内容长度 填充内容会重复填充</span><br><span class=\"line\"><span class=\"keyword\">select</span> rpad(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>) <span class=\"operator\">+</span> <span class=\"number\">6</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.12</span> ltrim 删除字符串左边空格</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span> <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> ltrim(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.13</span> rtrim 删除字符串右边空格</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> rtrim(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">char_length</span>(rtrim(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>)) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.14</span> trim 删除字符串左右边空格</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">trim</span>(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">char_length</span>(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">char_length</span>(<span class=\"built_in\">trim</span>(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>)) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.15</span> <span class=\"built_in\">trim</span>(s1 <span class=\"keyword\">from</span> s2) 删除左右两端指定字符串函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">trim</span>(<span class=\"string\">&#x27;xyz&#x27;</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;xyzabcxyzabcxyzabcxyz&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.16</span> repeat 重复生成相同的字符串</span><br><span class=\"line\"><span class=\"keyword\">select</span> repeat(<span class=\"string\">&#x27;爱我中华&#x27;</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.17</span> space 生成由空格组成的字符串</span><br><span class=\"line\"><span class=\"keyword\">select</span> concat_ws(space(<span class=\"number\">6</span>),<span class=\"string\">&#x27;爱&#x27;</span>,<span class=\"string\">&#x27;我&#x27;</span>,<span class=\"string\">&#x27;中&#x27;</span>,<span class=\"string\">&#x27;华&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.18</span> replace 字符串替换</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"string\">&#x27;我爱你你爱我，我们一起甜蜜蜜&#x27;</span> <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">insert</span>(<span class=\"string\">&#x27;我爱你你爱我，我们一起甜蜜蜜&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> replace(<span class=\"string\">&#x27;我爱你你爱我，我们一起甜蜜蜜&#x27;</span>,<span class=\"string\">&#x27;你爱我&#x27;</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> replace(<span class=\"string\">&#x27;你爱我你爱我，我们一起甜蜜蜜&#x27;</span>,<span class=\"string\">&#x27;你爱我&#x27;</span>,<span class=\"string\">&#x27;李昊哲&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> replace(<span class=\"string\">&#x27;   桃 李 不 言 下 自 成 蹊   &#x27;</span>,<span class=\"string\">&#x27; &#x27;</span>,<span class=\"string\">&#x27;&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.19</span> ascii 将 ascii 字符转为 ascii 码 字符串替换</span><br><span class=\"line\"><span class=\"keyword\">select</span> ascii(<span class=\"string\">&#x27;a&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> ascii(<span class=\"string\">&#x27;b&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.20</span> strcmp 比较字符大小 返回值为正数 为第一个参数比第二个参数大 反之第二个参数比第一个参数大 返回值为零两个参数一样大</span><br><span class=\"line\"><span class=\"keyword\">select</span> strcmp(<span class=\"string\">&#x27;a&#x27;</span>,<span class=\"string\">&#x27;b&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> strcmp(<span class=\"string\">&#x27;李&#x27;</span>,<span class=\"string\">&#x27;王&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.21</span> substring 字符串截取 第一个参数为原字符串 第二个参数为截取位置 位置从<span class=\"number\">1</span>开始 第三个参数为截取长度</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">substring</span>(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> substr(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.22</span> mid 字符串截取 第一个参数为原字符串 第二个参数为截取位置 位置从<span class=\"number\">1</span>开始 第三个参数为截取长度</span><br><span class=\"line\"><span class=\"keyword\">select</span> mid(<span class=\"string\">&#x27;桃李不言下自成蹊&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.23</span> locate 查找字符串中指定字符串第一次出现的位置 第一个参数是字符串中出现的字符串 返回值为零代表没有出现过</span><br><span class=\"line\"><span class=\"keyword\">select</span> locate(<span class=\"string\">&#x27;你爱我&#x27;</span>,<span class=\"string\">&#x27;我爱你你爱我我爱你你爱我&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> locate(<span class=\"string\">&#x27;蜜雪冰城&#x27;</span>,<span class=\"string\">&#x27;我爱你你爱我我爱你你爱我&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.24</span> reverse 逆序</span><br><span class=\"line\"><span class=\"keyword\">select</span> reverse(<span class=\"string\">&#x27;我爱你&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.4</span><span class=\"number\">.25</span> elt 返回指定位置的字符串 第一个参数是指定位置值</span><br><span class=\"line\"><span class=\"keyword\">select</span> elt(<span class=\"number\">3</span>,<span class=\"string\">&#x27;我&#x27;</span>,<span class=\"string\">&#x27;真&#x27;</span>,<span class=\"string\">&#x27;的&#x27;</span>,<span class=\"string\">&#x27;很&#x27;</span>,<span class=\"string\">&#x27;爱&#x27;</span>,<span class=\"string\">&#x27;你&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"日期时间函数\"><a href=\"#日期时间函数\" class=\"headerlink\" title=\"日期时间函数\"></a>日期时间函数</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.5</span> 日期时间函数</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.1</span> 获取当前日期</span><br><span class=\"line\"><span class=\"keyword\">select</span> curdate(),<span class=\"built_in\">current_date</span>() <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.2</span> 获取当前时间</span><br><span class=\"line\"><span class=\"keyword\">select</span> curtime(),<span class=\"built_in\">current_time</span>() <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.3</span> 获取当前日期和时间</span><br><span class=\"line\"><span class=\"keyword\">select</span> sysdate(),now(),<span class=\"built_in\">localtime</span>(),<span class=\"built_in\">current_timestamp</span>() <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.4</span> 获取当前时间戳</span><br><span class=\"line\"><span class=\"keyword\">select</span> unix_timestamp(), unix_timestamp(now()),unix_timestamp(<span class=\"string\">&#x27;1983-11-22 20:30:00&#x27;</span>),from_unixtime(<span class=\"number\">438352200</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.5</span> 获取UTC时间</span><br><span class=\"line\"><span class=\"keyword\">select</span> utc_date(),utc_time(),utc_timestamp() <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.6</span> 单独获取年、月、日、小时、分钟、秒、星期</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">year</span>(now()), <span class=\"keyword\">month</span>(now()),<span class=\"keyword\">day</span>(now()),dayofmonth(now()),<span class=\"keyword\">hour</span>(now()),<span class=\"keyword\">minute</span>(now()),<span class=\"keyword\">second</span>(now()) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># weekday 从零开始</span><br><span class=\"line\"><span class=\"keyword\">select</span> week(now()), weekday(now()),weekofyear(now()) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.7</span> 提取获取年、月、日、小时、分钟、秒、星期</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">year</span>(<span class=\"string\">&#x27;1983-11-22 20:30:00&#x27;</span>)  <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">extract</span>(<span class=\"keyword\">year</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;1983-11-22 20:30:00&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.8</span> 时间加减操作</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_add(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">year</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_add(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">month</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_add(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">day</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_add(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">hour</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_add(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">minute</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_add(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">second</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),subdate(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">year</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),subdate(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">month</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),subdate(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">day</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),subdate(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">hour</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),subdate(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">minute</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),subdate(now(), <span class=\"type\">interval</span> <span class=\"number\">1</span> <span class=\"keyword\">second</span> ) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.9</span> 计算时间间隔天数</span><br><span class=\"line\"><span class=\"keyword\">select</span> datediff(<span class=\"string\">&#x27;2023-09-28 15:01:01&#x27;</span>,<span class=\"string\">&#x27;2023-09-27 16:03:03&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.10</span> 日期格式化输出</span><br><span class=\"line\"># <span class=\"operator\">%</span>Y <span class=\"number\">4</span>位年份</span><br><span class=\"line\"># <span class=\"operator\">%</span>y <span class=\"number\">2</span>位年份</span><br><span class=\"line\"># <span class=\"operator\">%</span>M 月份全名</span><br><span class=\"line\"># <span class=\"operator\">%</span>b 月份缩写</span><br><span class=\"line\"># <span class=\"operator\">%</span>m <span class=\"number\">2</span>位月份</span><br><span class=\"line\"># <span class=\"operator\">%</span>D 当月第几天 数字th</span><br><span class=\"line\"># <span class=\"operator\">%</span>d <span class=\"number\">2</span>位日期</span><br><span class=\"line\"># <span class=\"operator\">%</span>H <span class=\"number\">24</span>小时</span><br><span class=\"line\"># <span class=\"operator\">%</span>h <span class=\"number\">12</span>小时</span><br><span class=\"line\"># <span class=\"operator\">%</span>i <span class=\"number\">2</span>位分钟</span><br><span class=\"line\"># <span class=\"operator\">%</span>s <span class=\"number\">2</span>位秒</span><br><span class=\"line\"># <span class=\"operator\">%</span>W 星期全名</span><br><span class=\"line\"># <span class=\"operator\">%</span>w 星期缩写</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),date_format(now(),<span class=\"string\">&#x27;%Y/%m/%d %H:%i:%s&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"># <span class=\"number\">1.5</span><span class=\"number\">.11</span> 时间格式化输出</span><br><span class=\"line\"><span class=\"keyword\">select</span> now(),time_format(now(),<span class=\"string\">&#x27;%Y/%m/%d %H:%i:%s&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"选择函数\"><a href=\"#选择函数\" class=\"headerlink\" title=\"选择函数\"></a>选择函数</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.6</span> 选择判断函数</span><br><span class=\"line\"># <span class=\"number\">1.6</span><span class=\"number\">.1</span> 第一个参数是条件表达式 条件表达式返回值为<span class=\"literal\">true</span>返回第二个参数 条件表达式返回值为<span class=\"literal\">false</span>返回第三个参数</span><br><span class=\"line\"><span class=\"keyword\">select</span> if(<span class=\"literal\">true</span>,<span class=\"string\">&#x27;成立&#x27;</span>,<span class=\"string\">&#x27;不成立&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> if(<span class=\"literal\">false</span>,<span class=\"string\">&#x27;成立&#x27;</span>,<span class=\"string\">&#x27;不成立&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> if(<span class=\"number\">1</span>,<span class=\"string\">&#x27;成立&#x27;</span>,<span class=\"string\">&#x27;不成立&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> if(<span class=\"number\">0</span>,<span class=\"string\">&#x27;成立&#x27;</span>,<span class=\"string\">&#x27;不成立&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> if(<span class=\"number\">-1</span>,<span class=\"string\">&#x27;成立&#x27;</span>,<span class=\"string\">&#x27;不成立&#x27;</span>) <span class=\"keyword\">from</span> dual;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.6</span><span class=\"number\">.2</span></span><br><span class=\"line\"># use chap04;</span><br><span class=\"line\"># <span class=\"keyword\">select</span> score <span class=\"keyword\">from</span> scores;</span><br><span class=\"line\"># # <span class=\"number\">90</span>以上A <span class=\"number\">80</span><span class=\"operator\">~</span><span class=\"number\">90</span>B <span class=\"number\">70</span><span class=\"operator\">~</span><span class=\"number\">80</span>C <span class=\"number\">60</span><span class=\"operator\">~</span><span class=\"number\">70</span>D <span class=\"number\">60</span>以下E</span><br><span class=\"line\"># <span class=\"keyword\">select</span> s_id,c_id,</span><br><span class=\"line\">#        <span class=\"keyword\">case</span></span><br><span class=\"line\">#            <span class=\"keyword\">when</span> score <span class=\"operator\">&gt;=</span> <span class=\"number\">90</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;A&#x27;</span></span><br><span class=\"line\">#            <span class=\"keyword\">when</span> score <span class=\"operator\">&gt;=</span> <span class=\"number\">80</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;B&#x27;</span></span><br><span class=\"line\">#            <span class=\"keyword\">when</span> score <span class=\"operator\">&gt;=</span> <span class=\"number\">70</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;C&#x27;</span></span><br><span class=\"line\">#            <span class=\"keyword\">when</span> score <span class=\"operator\">&gt;=</span> <span class=\"number\">60</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;D&#x27;</span></span><br><span class=\"line\">#            <span class=\"keyword\">else</span> <span class=\"string\">&#x27;E&#x27;</span></span><br><span class=\"line\">#         <span class=\"keyword\">end</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;level&#x27;</span></span><br><span class=\"line\">#        <span class=\"keyword\">from</span> scores;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开窗函数\"><a href=\"#开窗函数\" class=\"headerlink\" title=\"开窗函数\"></a>开窗函数</h3><blockquote>\n<p>能为每行数据划分一个窗口，然后对窗口范围内的数据进行计算，最后将计算结果返回给该行</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">Function</span>(arg1,..., argn) <span class=\"keyword\">OVER</span> ([<span class=\"keyword\">PARTITION</span> <span class=\"keyword\">BY</span> <span class=\"operator\">&lt;</span>...<span class=\"operator\">&gt;</span>] [<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> <span class=\"operator\">&lt;</span>....<span class=\"operator\">&gt;</span>] [<span class=\"operator\">&lt;</span>window_expression<span class=\"operator\">&gt;</span>])</span><br><span class=\"line\"><span class=\"comment\">-- 其中Function(arg1,..., argn) 可以是下面分类中的任意一个</span></span><br><span class=\"line\">    <span class=\"comment\">-- 聚合函数：比如sum max min avg count等</span></span><br><span class=\"line\">    <span class=\"comment\">-- 排序函数：比如row_number rank dense_rank等</span></span><br><span class=\"line\">    <span class=\"comment\">-- 分析函数：比如lead lag first_value last_value等</span></span><br><span class=\"line\"><span class=\"comment\">-- OVER [PARTITION BY &lt;...&gt;] 类似于group by 用于指定分组  每个分组你可以把它叫做窗口</span></span><br><span class=\"line\"><span class=\"comment\">-- 如果没有PARTITION BY 那么整张表的所有行就是一组</span></span><br><span class=\"line\"><span class=\"comment\">-- [ORDER BY &lt;....&gt;]  用于指定每个分组内的数据排序规则 支持ASC、DESC</span></span><br><span class=\"line\"><span class=\"comment\">-- [&lt;window_expression&gt;] 用于指定每个窗口中 操作的数据范围 默认是窗口中所有行</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.7</span><span class=\"number\">.1</span> 查询各科成绩前三名的学生</span><br><span class=\"line\"><span class=\"comment\">-- row_number() over () 连续序号</span></span><br><span class=\"line\"><span class=\"comment\">-- over()里头的分组以及排序的执行晚于 where 、group by、order by 的执行。</span></span><br><span class=\"line\"> <span class=\"keyword\">select</span> c_id ,score, <span class=\"built_in\">row_number</span>() <span class=\"keyword\">over</span> () <span class=\"keyword\">as</span> <span class=\"string\">&#x27;num&#x27;</span> <span class=\"keyword\">from</span> scores;</span><br><span class=\"line\"># <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> 作用相当于 <span class=\"keyword\">group</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"> <span class=\"keyword\">select</span> c_id ,score, <span class=\"built_in\">row_number</span>() <span class=\"keyword\">over</span> (<span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> c_id) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;num&#x27;</span> <span class=\"keyword\">from</span> scores;</span><br><span class=\"line\"># <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> 写在 开窗函数内 局部排序</span><br><span class=\"line\"> <span class=\"keyword\">select</span> c_id ,score, <span class=\"built_in\">row_number</span>() <span class=\"keyword\">over</span> (<span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> c_id <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> score <span class=\"keyword\">desc</span> ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;num&#x27;</span> <span class=\"keyword\">from</span> scores;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- row_number() over () 连续序号</span></span><br><span class=\"line\"><span class=\"comment\">-- over()里头的分组以及排序的执行晚于 where 、group by、order by 的执行。</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span></span><br><span class=\"line\">(</span><br><span class=\"line\">    <span class=\"keyword\">select</span> s_id,c_id ,score,</span><br><span class=\"line\">       <span class=\"built_in\">row_number</span>() <span class=\"keyword\">over</span> (<span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> c_id <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> score <span class=\"keyword\">desc</span> ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;num&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span> scores</span><br><span class=\"line\">) t <span class=\"keyword\">where</span> t.num <span class=\"operator\">&lt;</span> <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- rank() over () 排名 跳跃排序 序号不是连续的</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span></span><br><span class=\"line\">(</span><br><span class=\"line\">    <span class=\"keyword\">select</span> s_id,c_id ,score,</span><br><span class=\"line\">       <span class=\"built_in\">rank</span>() <span class=\"keyword\">over</span> (<span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> c_id <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> score <span class=\"keyword\">desc</span> ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;num&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span> scores</span><br><span class=\"line\">) t <span class=\"keyword\">where</span> t.num <span class=\"operator\">&lt;</span> <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- dense_rank() over () 排名 连续排序</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span></span><br><span class=\"line\">(</span><br><span class=\"line\">    <span class=\"keyword\">select</span> s_id,c_id ,score,</span><br><span class=\"line\">       <span class=\"built_in\">dense_rank</span>() <span class=\"keyword\">over</span> (<span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> c_id <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> score <span class=\"keyword\">desc</span> ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;num&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span> scores</span><br><span class=\"line\">) t <span class=\"keyword\">where</span> t.num <span class=\"operator\">&lt;</span> <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"行列转换\"><a href=\"#行列转换\" class=\"headerlink\" title=\"行列转换\"></a>行列转换</h2><h4 id=\"列转行\"><a href=\"#列转行\" class=\"headerlink\" title=\"列转行\"></a>列转行</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> test (</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    course_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    score <span class=\"type\">int</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> test <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;语文&#x27;</span>,<span class=\"string\">&#x27;80&#x27;</span>),(<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;数学&#x27;</span>,<span class=\"string\">&#x27;90&#x27;</span>), (<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;语文&#x27;</span>,<span class=\"string\">&#x27;85&#x27;</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;数学&#x27;</span>,<span class=\"string\">&#x27;95&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230928181546633.png\" alt=\"image-20230928181546633\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.9</span><span class=\"number\">.1</span> 列转行</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> test (</span><br><span class=\"line\">    stu_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    course_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    score <span class=\"type\">int</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> test <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;语文&#x27;</span>,<span class=\"string\">&#x27;80&#x27;</span>),(<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;数学&#x27;</span>,<span class=\"string\">&#x27;90&#x27;</span>), (<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;语文&#x27;</span>,<span class=\"string\">&#x27;85&#x27;</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;数学&#x27;</span>,<span class=\"string\">&#x27;95&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> test;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> stu_name,</span><br><span class=\"line\">       <span class=\"keyword\">case</span> <span class=\"keyword\">when</span> course_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;语文&#x27;</span> <span class=\"keyword\">then</span> score <span class=\"keyword\">end</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yuwen&#x27;</span>,</span><br><span class=\"line\">       <span class=\"keyword\">case</span> <span class=\"keyword\">when</span> course_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;数学&#x27;</span> <span class=\"keyword\">then</span> score <span class=\"keyword\">end</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;shuxue&#x27;</span></span><br><span class=\"line\">       <span class=\"keyword\">from</span> test;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- null 在 比较的时候 是最小值</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> stu_name,</span><br><span class=\"line\">       <span class=\"built_in\">max</span>(<span class=\"keyword\">case</span> <span class=\"keyword\">when</span> course_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;语文&#x27;</span> <span class=\"keyword\">then</span> score <span class=\"keyword\">end</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yuwen&#x27;</span>,</span><br><span class=\"line\">       <span class=\"built_in\">max</span>(<span class=\"keyword\">case</span> <span class=\"keyword\">when</span> course_name <span class=\"operator\">=</span> <span class=\"string\">&#x27;数学&#x27;</span> <span class=\"keyword\">then</span> score <span class=\"keyword\">end</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;shuxue&#x27;</span></span><br><span class=\"line\">       <span class=\"keyword\">from</span> test</span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> stu_name;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"行转列\"><a href=\"#行转列\" class=\"headerlink\" title=\"行转列\"></a>行转列</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.9</span><span class=\"number\">.2</span> 行转列</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> sales (</span><br><span class=\"line\">    emp_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    january <span class=\"type\">int</span>,</span><br><span class=\"line\">    february <span class=\"type\">int</span>,</span><br><span class=\"line\">    March <span class=\"type\">int</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sales <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1000</span>,<span class=\"number\">2000</span>,<span class=\"number\">3000</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">1500</span>,<span class=\"number\">2500</span>,<span class=\"number\">3500</span>);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> sales;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20230928183937795.png\" alt=\"image-20230928183937795\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> emp_name, <span class=\"string\">&#x27;january&#x27;</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yue&#x27;</span>, january <span class=\"keyword\">from</span> sales</span><br><span class=\"line\"><span class=\"keyword\">union</span> <span class=\"keyword\">all</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> emp_name,<span class=\"string\">&#x27;february&#x27;</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yue&#x27;</span>, february <span class=\"keyword\">from</span> sales</span><br><span class=\"line\"><span class=\"keyword\">union</span> <span class=\"keyword\">all</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> emp_name,<span class=\"string\">&#x27;March&#x27;</span> <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yue&#x27;</span>, March <span class=\"keyword\">from</span> sales</span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span>  emp_name;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> emp_name,yue_list,</span><br><span class=\"line\">       substring_index(substring_index(yue_list,<span class=\"string\">&#x27;,&#x27;</span>,<span class=\"number\">1</span>),<span class=\"string\">&#x27;,&#x27;</span>,<span class=\"number\">-1</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;january&#x27;</span>,</span><br><span class=\"line\">       substring_index(substring_index(yue_list,<span class=\"string\">&#x27;,&#x27;</span>,<span class=\"number\">2</span>),<span class=\"string\">&#x27;,&#x27;</span>,<span class=\"number\">-1</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;february&#x27;</span>,</span><br><span class=\"line\">       substring_index(substring_index(yue_list,<span class=\"string\">&#x27;,&#x27;</span>,<span class=\"number\">3</span>),<span class=\"string\">&#x27;,&#x27;</span>,<span class=\"number\">-1</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;March&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\">    (<span class=\"keyword\">select</span> emp_name ,group_concat(t.yue) <span class=\"keyword\">as</span> yue_list <span class=\"keyword\">from</span></span><br><span class=\"line\">        (<span class=\"keyword\">select</span> emp_name,january <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yue&#x27;</span> <span class=\"keyword\">from</span> sales</span><br><span class=\"line\">         <span class=\"keyword\">union</span> <span class=\"keyword\">all</span></span><br><span class=\"line\">        <span class=\"keyword\">select</span> emp_name,february <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yue&#x27;</span> <span class=\"keyword\">from</span> sales</span><br><span class=\"line\">        <span class=\"keyword\">union</span> <span class=\"keyword\">all</span></span><br><span class=\"line\">        <span class=\"keyword\">select</span> emp_name,March <span class=\"keyword\">as</span> <span class=\"string\">&#x27;yue&#x27;</span> <span class=\"keyword\">from</span> sales</span><br><span class=\"line\">        <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> emp_name) t</span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> t.emp_name) t1;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"身份证\"><a href=\"#身份证\" class=\"headerlink\" title=\"身份证\"></a>身份证</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># <span class=\"number\">1.10</span> 身份证</span><br><span class=\"line\"># 第<span class=\"number\">1</span>位和第<span class=\"number\">2</span>位数字代表出生省份地区码</span><br><span class=\"line\"># 第<span class=\"number\">3</span>位和第<span class=\"number\">4</span>位数字代表出生省份所辖城市地区码</span><br><span class=\"line\"># 第<span class=\"number\">5</span>位和第<span class=\"number\">6</span>位数字代表出生省份所辖城市所辖区县地区码</span><br><span class=\"line\"># 第<span class=\"number\">7</span>、<span class=\"number\">8</span>、<span class=\"number\">9</span>、<span class=\"number\">10</span>位数字代表出生出生年份</span><br><span class=\"line\"># 第<span class=\"number\">11</span>、<span class=\"number\">12</span>位数字代表出生出生月份</span><br><span class=\"line\"># 第<span class=\"number\">13</span>、<span class=\"number\">14</span>位数字代表出生出生日期</span><br><span class=\"line\"># 第<span class=\"number\">15</span>、<span class=\"number\">16</span>位顺序码</span><br><span class=\"line\"># 第<span class=\"number\">17</span>位数字代表性别 奇数代表男性 偶数代表女性</span><br><span class=\"line\"># 第<span class=\"number\">18</span>位数字代表校验码m，用于验证身份证号码的合法性</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">1.10</span><span class=\"number\">.1</span> 计算性别</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> ,<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">17</span>,<span class=\"number\">1</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;gender&#x27;</span> <span class=\"keyword\">from</span> person;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> ,<span class=\"built_in\">mod</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">17</span>,<span class=\"number\">1</span>),<span class=\"number\">2</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;gender&#x27;</span> <span class=\"keyword\">from</span> person;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> ,if(<span class=\"built_in\">mod</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">17</span>,<span class=\"number\">1</span>),<span class=\"number\">2</span>),<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;女&#x27;</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;gender&#x27;</span> <span class=\"keyword\">from</span> person;</span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\">    if(<span class=\"built_in\">mod</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">17</span>,<span class=\"number\">1</span>),<span class=\"number\">2</span>),<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;女&#x27;</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;gender&#x27;</span> ,</span><br><span class=\"line\">    <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>)</span><br><span class=\"line\">    <span class=\"keyword\">from</span> person <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> gender;</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">1.10</span><span class=\"number\">.2</span> 按照出生日期排序</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> ,<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;date_of_birth&#x27;</span> <span class=\"keyword\">from</span> person <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> date_of_birth <span class=\"keyword\">desc</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"># <span class=\"number\">1.10</span><span class=\"number\">.3</span> 计算年龄</span><br><span class=\"line\"># 方式一：子查询</span><br><span class=\"line\"><span class=\"keyword\">select</span> id, id_card, first_name, last_name, mobile, auth_text, date_of_birth,</span><br><span class=\"line\">    # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span> 说明已经过完生日了 直接返回 之前计算的年纪</span><br><span class=\"line\">    if(<span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(date_of_birth) <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>,age,</span><br><span class=\"line\">        # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">&lt;</span> <span class=\"number\">0</span> 说明还没有过生日 直接返回 年纪 <span class=\"operator\">=</span> 之前计算的年纪 <span class=\"operator\">-</span> <span class=\"number\">1</span></span><br><span class=\"line\">        if(<span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(date_of_birth) <span class=\"operator\">&lt;</span> <span class=\"number\">0</span>,age <span class=\"operator\">-</span> <span class=\"number\">1</span>,</span><br><span class=\"line\">            # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">=</span> <span class=\"number\">0</span></span><br><span class=\"line\">            # 当前日期 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span> 说明已经过完生日了 直接返回 之前计算的年纪</span><br><span class=\"line\">            # 当前日期 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">&lt;=</span> <span class=\"number\">0</span> 说明还没有过生日 直接返回 年纪 <span class=\"operator\">=</span> 之前计算的年纪 <span class=\"operator\">-</span> <span class=\"number\">1</span></span><br><span class=\"line\">            if(<span class=\"keyword\">day</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">day</span>(date_of_birth) <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>,age,age <span class=\"operator\">-</span> <span class=\"number\">1</span>)</span><br><span class=\"line\">        )</span><br><span class=\"line\">    ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;age&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">from</span></span><br><span class=\"line\">    (<span class=\"keyword\">select</span> id, id_card, first_name, last_name, mobile, auth_text, date_of_birth,</span><br><span class=\"line\">            # 当前年份 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">=</span> 年纪</span><br><span class=\"line\">           (<span class=\"keyword\">year</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">year</span>(date_of_birth)) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;age&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span></span><br><span class=\"line\">            # 从身份证截取出生日期</span><br><span class=\"line\">        (<span class=\"keyword\">select</span> <span class=\"operator\">*</span> ,<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;date_of_birth&#x27;</span> <span class=\"keyword\">from</span> person ) t1) t2;</span><br><span class=\"line\"></span><br><span class=\"line\"># 方式二：反复调用时间函数</span><br><span class=\"line\"><span class=\"keyword\">select</span> id, id_card, first_name, last_name, mobile, auth_text,</span><br><span class=\"line\">    # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span> 说明已经过完生日了 直接返回 之前计算的年纪</span><br><span class=\"line\">    if(<span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)),</span><br><span class=\"line\">        # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">&lt;</span> <span class=\"number\">0</span> 说明还没有过生日 直接返回 年纪 <span class=\"operator\">=</span> 之前计算的年纪 <span class=\"operator\">-</span> <span class=\"number\">1</span></span><br><span class=\"line\">        if(<span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"operator\">&lt;</span> <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"operator\">-</span> <span class=\"number\">1</span>,</span><br><span class=\"line\">            # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">=</span> <span class=\"number\">0</span></span><br><span class=\"line\">            # 当前日期 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span> 说明已经过完生日了 直接返回 之前计算的年纪</span><br><span class=\"line\">            # 当前日期 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">&lt;=</span> <span class=\"number\">0</span> 说明还没有过生日 直接返回 年纪 <span class=\"operator\">=</span> 之前计算的年纪 <span class=\"operator\">-</span> <span class=\"number\">1</span></span><br><span class=\"line\">            if(<span class=\"keyword\">day</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">day</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>,</span><br><span class=\"line\">               <span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)),</span><br><span class=\"line\">               <span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>)) <span class=\"operator\">-</span> <span class=\"number\">1</span>)</span><br><span class=\"line\">        )</span><br><span class=\"line\">    ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;age&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">from</span> person;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"string\">&#x27;&#123;&quot;name&quot;:&quot;李昊哲&quot;,&quot;firends&quot;:[&quot;温柔&quot;,&quot;知性&quot;,&quot;美丽&quot;,&quot;大方&quot;]&#125;&#x27;</span> <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> json_extract(<span class=\"string\">&#x27;&#123;&quot;name&quot;:&quot;李昊哲&quot;,&quot;firends&quot;:[&quot;温柔&quot;,&quot;知性&quot;,&quot;美丽&quot;,&quot;大方&quot;]&#125;&#x27;</span>,<span class=\"string\">&#x27;$.name&#x27;</span>) <span class=\"keyword\">as</span> name <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> json_extract(<span class=\"string\">&#x27;&#123;&quot;name&quot;:&quot;李昊哲&quot;,&quot;firends&quot;:[&quot;温柔&quot;,&quot;知性&quot;,&quot;美丽&quot;,&quot;大方&quot;]&#125;&#x27;</span>,<span class=\"string\">&#x27;$.firends&#x27;</span>) <span class=\"keyword\">as</span> firends <span class=\"keyword\">from</span> dual;</span><br><span class=\"line\"><span class=\"keyword\">select</span> json_extract(<span class=\"string\">&#x27;&#123;&quot;name&quot;:&quot;李昊哲&quot;,&quot;firends&quot;:[&quot;温柔&quot;,&quot;知性&quot;,&quot;美丽&quot;,&quot;大方&quot;]&#125;&#x27;</span>,<span class=\"string\">&#x27;$.firends[1]&#x27;</span>) <span class=\"keyword\">as</span> firend <span class=\"keyword\">from</span> dual;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"视图\"><a href=\"#视图\" class=\"headerlink\" title=\"视图\"></a>视图</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">view</span> person_view <span class=\"keyword\">as</span> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person_view;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">update</span> person <span class=\"keyword\">set</span> mobile <span class=\"operator\">=</span> <span class=\"string\">&#x27;13427468302&#x27;</span> <span class=\"keyword\">where</span> id <span class=\"operator\">=</span> <span class=\"number\">1</span> ;</span><br><span class=\"line\"><span class=\"keyword\">update</span> person_view <span class=\"keyword\">set</span> mobile <span class=\"operator\">=</span> <span class=\"string\">&#x27;13427468303&#x27;</span> <span class=\"keyword\">where</span> id <span class=\"operator\">=</span> <span class=\"number\">1</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">view</span> person_view;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">view</span> person_view <span class=\"keyword\">as</span></span><br><span class=\"line\">    <span class=\"keyword\">select</span> id, id_card, first_name, last_name, mobile, auth_text, date_of_birth,</span><br><span class=\"line\">    # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span> 说明已经过完生日了 直接返回 之前计算的年纪</span><br><span class=\"line\">    if(<span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(date_of_birth) <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>,age,</span><br><span class=\"line\">        # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">&lt;</span> <span class=\"number\">0</span> 说明还没有过生日 直接返回 年纪 <span class=\"operator\">=</span> 之前计算的年纪 <span class=\"operator\">-</span> <span class=\"number\">1</span></span><br><span class=\"line\">        if(<span class=\"keyword\">month</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">month</span>(date_of_birth) <span class=\"operator\">&lt;</span> <span class=\"number\">0</span>,age <span class=\"operator\">-</span> <span class=\"number\">1</span>,</span><br><span class=\"line\">            # 当前月份 <span class=\"operator\">-</span> 出生月份 <span class=\"operator\">=</span> <span class=\"number\">0</span></span><br><span class=\"line\">            # 当前日期 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">&gt;</span> <span class=\"number\">0</span> 说明已经过完生日了 直接返回 之前计算的年纪</span><br><span class=\"line\">            # 当前日期 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">&lt;=</span> <span class=\"number\">0</span> 说明还没有过生日 直接返回 年纪 <span class=\"operator\">=</span> 之前计算的年纪 <span class=\"operator\">-</span> <span class=\"number\">1</span></span><br><span class=\"line\">            if(<span class=\"keyword\">day</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">day</span>(date_of_birth) <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>,age,age <span class=\"operator\">-</span> <span class=\"number\">1</span>)</span><br><span class=\"line\">        )</span><br><span class=\"line\">    ) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;age&#x27;</span>,<span class=\"built_in\">mod</span>(<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">17</span>,<span class=\"number\">1</span>),<span class=\"number\">2</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;gender&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">from</span></span><br><span class=\"line\">    (<span class=\"keyword\">select</span> id, id_card, first_name, last_name, mobile, auth_text, date_of_birth,</span><br><span class=\"line\">            # 当前年份 <span class=\"operator\">-</span> 出生日期 <span class=\"operator\">=</span> 年纪</span><br><span class=\"line\">           (<span class=\"keyword\">year</span>(curdate()) <span class=\"operator\">-</span> <span class=\"keyword\">year</span>(date_of_birth)) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;age&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span></span><br><span class=\"line\">            # 从身份证截取出生日期</span><br><span class=\"line\">        (<span class=\"keyword\">select</span> <span class=\"operator\">*</span> ,<span class=\"built_in\">substring</span>(id_card,<span class=\"number\">7</span>,<span class=\"number\">8</span>) <span class=\"keyword\">as</span> <span class=\"string\">&#x27;date_of_birth&#x27;</span> <span class=\"keyword\">from</span> person ) t1) t2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> person_new</span><br><span class=\"line\">(</span><br><span class=\"line\">    id         <span class=\"type\">int</span> auto_increment comment <span class=\"string\">&#x27;主键&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">primary</span> key,</span><br><span class=\"line\">    id_card    <span class=\"type\">varchar</span>(<span class=\"number\">18</span>)  <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">    first_name <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)  <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">    last_name  <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)  <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">    mobile     <span class=\"type\">varchar</span>(<span class=\"number\">11</span>)  <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">    auth_text  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">null</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person_new <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person_new;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"事务\"><a href=\"#事务\" class=\"headerlink\" title=\"事务\"></a>事务</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">select</span> @<span class=\"variable\">@global</span>.transaction_isolation;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> @<span class=\"variable\">@global</span>.transaction_isolation <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> REPEATABLE<span class=\"operator\">-</span>READ                <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SET</span> <span class=\"keyword\">GLOBAL</span> TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> @<span class=\"variable\">@global</span>.transaction_isolation;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> @<span class=\"variable\">@global</span>.transaction_isolation <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> READ<span class=\"operator\">-</span>UNCOMMITTED               <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">--------------------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>隔离级别</th>\n<th>脏读</th>\n<th>不可重复读</th>\n<th>幻影读</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>READ-UNCOMMITTED</td>\n<td>√</td>\n<td>√</td>\n<td>√</td>\n</tr>\n<tr>\n<td>READ-COMMITTED</td>\n<td>×</td>\n<td>√</td>\n<td>√</td>\n</tr>\n<tr>\n<td>REPEATABLE-READ</td>\n<td>×</td>\n<td>×</td>\n<td>√</td>\n</tr>\n<tr>\n<td>SERIALIZABLE</td>\n<td>×</td>\n<td>×</td>\n<td>×</td>\n</tr>\n</tbody></table>\n<h1 id=\"表分区\"><a href=\"#表分区\" class=\"headerlink\" title=\"表分区\"></a>表分区</h1><h2 id=\"表分区介绍\"><a href=\"#表分区介绍\" class=\"headerlink\" title=\"表分区介绍\"></a>表分区介绍</h2><blockquote>\n<p>MySQL 数据库中的数据是以文件的形势存在磁盘上的，</p>\n<p>默认放在 <code>/var/lib/mysql/</code> 目录下面，</p>\n<p>我们可以通过 <code>show variables like &#39;%datadir%&#39;;</code> 命令来查看：</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> variables <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%datadir%&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20231113195959417.png\" alt=\"image-20231113195959417\"></p>\n<blockquote>\n<p>我们进入到这个目录下，就可以看到我们定义的所有数据库了，</p>\n<p>一个数据库就是一个目录，一个库中，有其对应的表的信息，如下：</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /var/lib/mysql</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ls</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20231113200238375.png\" alt=\"image-20231113200238375\"></p>\n<p>优点：</p>\n<ol>\n<li>查询性能提升：分区可以将大表划分为更小的部分，查询时只需扫描特定的分区，而不是整个表，从而提高查询性能。特别是在处理大量数据或高并发负载时，分区可以显著减少查询的响应时间。</li>\n<li>管理和维护的简化：使用分区可以更轻松地管理和维护数据。可以针对特定的分区执行维护操作，如备份、恢复、优化和数据清理，而不必处理整个表。这简化了维护任务并减少了操作的复杂性。</li>\n<li>数据管理灵活性：通过分区，可以根据业务需求轻松地添加或删除分区，而无需影响整个表。这使得数据的增长和变化更具弹性，可以根据需求进行动态调整。</li>\n<li>改善数据安全性和可用性：可以将不同分区的数据分布在不同的存储设备上，从而提高数据的安全性和可用性。例如，可以将热数据放在高速存储设备上，而将冷数据放在廉价存储设备上，以实现更高的性能和成本效益。</li>\n</ol>\n<p>缺点：</p>\n<ol>\n<li>复杂性增加：分区引入了额外的复杂性，包括分区策略的选择、表结构的设计和维护、查询逻辑的调整等。正确地设置和管理分区需要一定的经验和专业知识。</li>\n<li>索引效率下降：对于某些查询，特别是涉及跨分区的查询，可能会导致索引效率下降。由于查询需要在多个分区之间进行扫描，可能无法充分利用索引优势，从而影响查询性能。</li>\n<li>存储空间需求增加：使用分区会导致一定程度的存储空间浪费。每个分区都需要占用一定的存储空间，包括分区元数据和一些额外的开销。因此，对于分区键的选择和分区粒度的设置需要权衡存储空间和性能之间的关系。</li>\n<li>功能限制：在某些情况下，分区可能会限制某些MySQL的功能和特性的使用。例如，某些类型的索引可能无法在分区表上使用，或者某些DDL操作可能需要更复杂的处理。</li>\n</ol>\n<blockquote>\n<p>在考虑使用分区时，需要综合考虑业务需求、查询模式、数据规模和硬件资源等因素，</p>\n<p>并权衡分区带来的优势和缺点。对于特定的应用和数据场景，</p>\n<p>分区可能是一个有效的解决方案，但并不适用于所有情况。</p>\n</blockquote>\n<p>同时分区表也存在一些限制，如下：</p>\n<p>限制：</p>\n<ul>\n<li>在mysql5.6.7之前的版本，一个表最多有1024个分区；从5.6.7开始，一个表最多可以有8192个分区。</li>\n<li>分区表无法使用外键约束。</li>\n<li>NULL值会使分区过滤无效。</li>\n<li>所有分区必须使用相同的存储引擎。</li>\n</ul>\n<h2 id=\"分区适用场景\"><a href=\"#分区适用场景\" class=\"headerlink\" title=\"分区适用场景\"></a>分区适用场景</h2><p>分区表在以下情况下可以发挥其优势，适用于以下几种使用场景：</p>\n<ol>\n<li>大型表处理：当面对非常大的表时，分区表可以提高查询性能。通过将表分割为更小的分区，查询操作只需要处理特定的分区，从而减少扫描的数据量，提高查询效率。这在处理日志数据、历史数据或其他需要大量存储和高性能查询的场景中非常有用。</li>\n<li>时间范围查询：对于按时间排序的数据，分区表可以按照时间范围进行分区，每个分区包含特定时间段内的数据。这使得按时间范围进行查询变得更高效，例如在某个时间段内检索数据、生成报表或执行时间段的聚合操作。</li>\n<li>数据归档和数据保留：分区表可用于数据归档和数据保留的需求。旧数据可以归档到单独的分区中，并将其存储在低成本的存储介质上。同时，可以保留较新数据在高性能的存储介质上，以便快速查询和操作。</li>\n<li>并行查询和负载均衡：通过哈希分区或键分区，可以将数据均匀地分布在多个分区中，从而实现并行查询和负载均衡。查询可以同时在多个分区上进行，并在最终合并结果，提高查询性能和系统吞吐量。</li>\n<li>数据删除和维护：使用分区表，可以更轻松地删除或清理不再需要的数据。通过删除整个分区，可以更快速地删除大量数据，而不会影响整个表的操作。此外，可以针对特定分区执行维护任务，如重新构建索引、备份和优化，以减少对整个表的影响。</li>\n</ol>\n<p>分区表并非适用于所有情况。在选择使用分区表时，需要综合考虑数据量、查询模式、存储资源和硬件能力等因素，并评估分区对性能和管理的影响。</p>\n<h2 id=\"分区策略\"><a href=\"#分区策略\" class=\"headerlink\" title=\"分区策略\"></a><strong>分区策略</strong></h2><blockquote>\n<ol>\n<li>RANGE分区</li>\n</ol>\n</blockquote>\n<h3 id=\"RANGE分区\"><a href=\"#RANGE分区\" class=\"headerlink\" title=\"RANGE分区\"></a><strong>RANGE分区</strong></h3><p>RANGE分区是MySQL中的一种分区策略，根据某一列的范围值将数据分布到不同的分区。</p>\n<p>每个分区包含特定的范围。下面是RANGE分区的定义方式、特点以及代码示例。</p>\n<p>定义方式：</p>\n<ol>\n<li>指定分区键：选择作为分区依据的列作为分区键，通常是日期、数值等具有范围特性的列。</li>\n<li>分区函数：通过<code>PARTITION BY RANGE</code>指定使用RANGE分区策略。</li>\n<li>定义分区范围：使用<code>VALUES LESS THAN</code>子句定义每个分区的范围。</li>\n</ol>\n<p>RANGE分区的特点：</p>\n<ol>\n<li>范围划分：根据指定列的范围进行分区，适用于需要按范围进行查询和管理的情况。</li>\n<li>灵活的范围定义：可以定义任意数量的分区，并且每个分区可以具有不同的范围。</li>\n<li>高效查询：根据查询条件的范围，MySQL能够快速定位到特定的分区，提高查询效率。</li>\n<li>动态管理：可以根据业务需求轻松添加或删除分区，适应数据增长或变更的需求。</li>\n</ol>\n<p>以下是一个使用RANGE分区的代码示例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table sale(</span><br><span class=\"line\">\tsale_id int,</span><br><span class=\"line\">    sale_date date,</span><br><span class=\"line\">    amount decimal(10,2)</span><br><span class=\"line\">) partition by range(year(sale_date))(</span><br><span class=\"line\">    partition p0 values less than (2020),</span><br><span class=\"line\">    partition p1 values less than (2021),</span><br><span class=\"line\">    partition p2 values less than (2022),</span><br><span class=\"line\">    partition p3 values less than (2023),</span><br><span class=\"line\">    partition p4 values less than (2024),</span><br><span class=\"line\">    partition p5 values less than (2025)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">1</span>,<span class=\"string\">&#x27;2020-11-11&#x27;</span>,<span class=\"number\">9999.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;2020-12-12&#x27;</span>,<span class=\"number\">6666.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">3</span>,<span class=\"string\">&#x27;2021-11-11&#x27;</span>,<span class=\"number\">12000.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">4</span>,<span class=\"string\">&#x27;2021-12-12&#x27;</span>,<span class=\"number\">13000.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">5</span>,<span class=\"string\">&#x27;2022-11-11&#x27;</span>,<span class=\"number\">13000.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">6</span>,<span class=\"string\">&#x27;2022-12-12&#x27;</span>,<span class=\"number\">12500.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">7</span>,<span class=\"string\">&#x27;2023-11-11&#x27;</span>,<span class=\"number\">12500.00</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> sale <span class=\"keyword\">values</span> (<span class=\"number\">8</span>,<span class=\"string\">&#x27;2023-12-12&#x27;</span>,<span class=\"number\">13000.00</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> sale <span class=\"keyword\">partition</span>(p0);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> sale <span class=\"keyword\">partition</span>(p1);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"D:/dev/code/vue/vue_study/bigdata2024/MySQL/img/image-20231113203334766.png\" alt=\"image-20231113203334766\"></p>\n<h3 id=\"LIST分区\"><a href=\"#LIST分区\" class=\"headerlink\" title=\"LIST分区\"></a><strong>LIST分区</strong></h3><p>LIST分区是根据某一列的离散值将数据分布到不同的分区。每个分区包含特定的列值列表。下面是LIST分区的定义方式、特点以及代码示例。<br>定义方式：</p>\n<ol>\n<li>指定分区键：选择作为分区依据的列作为分区键，通常是具有离散值的列，如地区、类别等。</li>\n<li>分区函数：通过<code>PARTITION BY LIST</code>指定使用LIST分区策略。</li>\n<li>定义分区列表：使用<code>VALUES IN</code>子句定义每个分区包含的列值列表。</li>\n</ol>\n<p>LIST分区的特点：</p>\n<ol>\n<li>列值离散：根据指定列的具体取值进行分区，适用于具有离散值的列。</li>\n<li>灵活的分区定义：可以定义任意数量的分区，并且每个分区可以具有不同的列值列表。</li>\n<li>高效查询：根据查询条件的列值直接定位到特定分区，提高查询效率。</li>\n<li>动态管理：可以根据业务需求轻松添加或删除分区，适应数据增长或变更的需求。</li>\n</ol>\n<p>以下是一个使用LIST分区的代码示例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table people(</span><br><span class=\"line\">\tid_card varchar(18),</span><br><span class=\"line\">    name varchar(50),</span><br><span class=\"line\">    province int</span><br><span class=\"line\">) partition by list(province)(</span><br><span class=\"line\">    partition huabei values in (11,12,13,14,15),</span><br><span class=\"line\">    partition dongbei values in (21,22,23),</span><br><span class=\"line\">    partition huazhong values in (31,32,33,34,35,36,37),</span><br><span class=\"line\">    partition huadong values in (41,42,43,44,45,46),</span><br><span class=\"line\">    partition xinan values in (50,51,52,53,55),</span><br><span class=\"line\">    partition xibei values in (61,62,63,64,65),</span><br><span class=\"line\">    partition gang_ao_tai values in (71,81,91)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;410182198903224674&#x27;</span>,<span class=\"string\">&#x27;邱赣&#x27;</span>,<span class=\"number\">41</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;411429199211019071&#x27;</span>,<span class=\"string\">&#x27;何天&#x27;</span>,<span class=\"number\">41</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;310182198903224674&#x27;</span>,<span class=\"string\">&#x27;方加牡&#x27;</span>,<span class=\"number\">31</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;210182198903224674&#x27;</span>,<span class=\"string\">&#x27;贺巧&#x27;</span>,<span class=\"number\">21</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;110182198903224674&#x27;</span>,<span class=\"string\">&#x27;闾丘饱乾&#x27;</span>,<span class=\"number\">11</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;510182198903224674&#x27;</span>,<span class=\"string\">&#x27;丁经&#x27;</span>,<span class=\"number\">51</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;610182198903224674&#x27;</span>,<span class=\"string\">&#x27;韦散&#x27;</span>,<span class=\"number\">61</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;710182198903224674&#x27;</span>,<span class=\"string\">&#x27;东方让&#x27;</span>,<span class=\"number\">71</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;810182198903224674&#x27;</span>,<span class=\"string\">&#x27;赖队瞻&#x27;</span>,<span class=\"number\">81</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;910182198903224674&#x27;</span>,<span class=\"string\">&#x27;郭叹&#x27;</span>,<span class=\"number\">91</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;120182198903224674&#x27;</span>,<span class=\"string\">&#x27;慕容芋岛&#x27;</span>,<span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;220182198903224674&#x27;</span>,<span class=\"string\">&#x27;孙劣&#x27;</span>,<span class=\"number\">22</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;320182198903224674&#x27;</span>,<span class=\"string\">&#x27;王桃&#x27;</span>,<span class=\"number\">32</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;420182198903224674&#x27;</span>,<span class=\"string\">&#x27;郝郑惭&#x27;</span>,<span class=\"number\">42</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;520182198903224674&#x27;</span>,<span class=\"string\">&#x27;余烂&#x27;</span>,<span class=\"number\">52</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> people <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;620182198903224674&#x27;</span>,<span class=\"string\">&#x27;宇文酚&#x27;</span>,<span class=\"number\">62</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> people <span class=\"keyword\">partition</span>(huabei);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> people <span class=\"keyword\">partition</span>(dongbei);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> people <span class=\"keyword\">partition</span>(huazhong);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> people <span class=\"keyword\">partition</span>(huadong);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> people <span class=\"keyword\">partition</span>(xibei);</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> people <span class=\"keyword\">partition</span>(gang_ao_tai);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HASH分区\"><a href=\"#HASH分区\" class=\"headerlink\" title=\"HASH分区\"></a><strong>HASH分区</strong></h3><p>HASH分区是使用哈希算法将数据均匀地分布到多个分区中。下面是HASH分区的定义方式、特点以及代码示例。<br>定义方式：</p>\n<ol>\n<li>指定分区键：选择作为分区依据的列作为分区键。</li>\n<li>分区函数：通过<code>PARTITION BY HASH</code>指定使用HASH分区策略。</li>\n<li>定义分区数量：使用<code>PARTITIONS</code>关键字指定分区的数量。</li>\n</ol>\n<p>HASH分区的特点：</p>\n<ol>\n<li>数据均匀分布：HASH分区使用哈希算法将数据均匀地分布到不同的分区中，确保数据在各个分区之间平衡。</li>\n<li>并行查询性能：通过将数据分散到多个分区，HASH分区可以提高并行查询的性能，多个查询可以同时在不同分区上执行。</li>\n<li>简化管理：HASH分区使得数据管理更加灵活，可以轻松地添加或删除分区，以适应数据增长或变更的需求。</li>\n</ol>\n<p>以下是一个使用HASH分区的代码示例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> (</span><br><span class=\"line\">    id <span class=\"type\">int</span> auto_increment,</span><br><span class=\"line\">    name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (id)</span><br><span class=\"line\">)</span><br><span class=\"line\"> <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> hash (id)</span><br><span class=\"line\"> partitions <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;邱赣&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;何天&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;方加牡&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;贺巧&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;闾丘饱乾&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;丁经&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;韦散&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;东方让&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;赖队瞻&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;郭叹&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;慕容芋岛&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;孙劣&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;王桃&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;郝郑惭&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;余烂&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">user</span> (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;宇文酚&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">partition</span>(p0);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">partition</span>(p1);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">partition</span>(p2);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">partition</span>(p3);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"KEY分区\"><a href=\"#KEY分区\" class=\"headerlink\" title=\"KEY分区\"></a><strong>KEY分区</strong></h3><p>KEY分区是根据某一列的哈希值将数据分布到不同的分区。不同于HASH分区，KEY分区使用的是列值的哈希值而不是哈希函数。下面是KEY分区的定义方式、特点以及代码示例。</p>\n<p>定义方式：</p>\n<ol>\n<li>指定分区键：选择作为分区依据的列作为分区键。</li>\n<li>分区函数：通过<code>PARTITION BY KEY</code>指定使用KEY分区策略。</li>\n<li>定义分区数量：使用<code>PARTITIONS</code>关键字指定分区的数量。</li>\n</ol>\n<p>KEY分区的特点：</p>\n<ol>\n<li>哈希分布：KEY分区使用列值的哈希值将数据分布到不同的分区中，与哈希函数不同，它使用的是列值的哈希值。</li>\n<li>高度自定义：KEY分区允许根据业务需求自定义分区逻辑，可以灵活地选择分区键和分区数量。</li>\n<li>并行查询性能：通过将数据分散到多个分区，KEY分区可以提高并行查询的性能，多个查询可以同时在不同分区上执行。</li>\n<li>简化管理：KEY分区使得数据管理更加灵活，可以轻松地添加或删除分区，以适应数据增长或变更的需求。</li>\n</ol>\n<p>以下是一个使用KEY分区的代码示例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> person (</span><br><span class=\"line\">    id <span class=\"type\">int</span> auto_increment,</span><br><span class=\"line\">    name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    <span class=\"keyword\">primary</span> key (id)</span><br><span class=\"line\">)</span><br><span class=\"line\"> <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> key(id)</span><br><span class=\"line\"> partitions <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;邱赣&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;何天&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;方加牡&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;贺巧&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;闾丘饱乾&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;丁经&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;韦散&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;东方让&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;赖队瞻&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;郭叹&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;慕容芋岛&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;孙劣&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;王桃&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;郝郑惭&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;余烂&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> person (name) <span class=\"keyword\">values</span> (<span class=\"string\">&#x27;宇文酚&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person <span class=\"keyword\">partition</span>(p0);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person <span class=\"keyword\">partition</span>(p1);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person <span class=\"keyword\">partition</span>(p2);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> person <span class=\"keyword\">partition</span>(p3);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"COLUMNS-分区\"><a href=\"#COLUMNS-分区\" class=\"headerlink\" title=\"COLUMNS 分区\"></a><strong>COLUMNS 分区</strong></h3><p>MySQL在5.5版本引入了COLUMNS分区类型，其中包括RANGE COLUMNS分区和LIST COLUMNS分区。以下是对这两种COLUMNS分区的详细说明：</p>\n<ol>\n<li><p>RANGE COLUMNS分区： RANGE COLUMNS分区是根据列的范围值将数据分布到不同的分区的分区策略。它类似于RANGE分区，但是根据多个列的范围值进行分区，而不是只根据一个列。这使得范围的定义更加灵活，可以基于多个列的组合来进行分区。<br>下面是一个RANGE COLUMNS分区的代码示例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> product(</span><br><span class=\"line\">    product_id <span class=\"type\">int</span>,</span><br><span class=\"line\">    product_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    product_location <span class=\"type\">int</span>,</span><br><span class=\"line\">    category_id <span class=\"type\">int</span></span><br><span class=\"line\">) <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> <span class=\"keyword\">range</span> columns(category_id,product_location)(</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p11 <span class=\"keyword\">values</span> less than (<span class=\"number\">1</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p12 <span class=\"keyword\">values</span> less than (<span class=\"number\">1</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p21 <span class=\"keyword\">values</span> less than (<span class=\"number\">2</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p22 <span class=\"keyword\">values</span> less than (<span class=\"number\">2</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>每个分区根据这两列的范围值进行划分。</p>\n</li>\n<li><p>LIST COLUMNS分区： LIST COLUMNS分区是根据列的离散值将数据分布到不同的分区的分区策略。它类似于LIST分区，但是根据多个列的离散值进行分区，而不是只根据一个列。这使得离散值的定义更加灵活，可以基于多个列的组合来进行分区。<br>下面是一个LIST COLUMNS分区的代码示例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> product(</span><br><span class=\"line\">    product_id <span class=\"type\">int</span>,</span><br><span class=\"line\">    product_name <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">    product_location <span class=\"type\">int</span>,</span><br><span class=\"line\">    category_id <span class=\"type\">int</span></span><br><span class=\"line\">) <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> list columns(category_id,product_location)(</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p12 <span class=\"keyword\">values</span> <span class=\"keyword\">in</span> ((<span class=\"number\">1</span>,<span class=\"number\">1</span>),(<span class=\"number\">1</span>,<span class=\"number\">2</span>)),</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p22 <span class=\"keyword\">values</span> <span class=\"keyword\">in</span> ((<span class=\"number\">2</span>,<span class=\"number\">1</span>),(<span class=\"number\">2</span>,<span class=\"number\">2</span>))</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"常见分区命令\"><a href=\"#常见分区命令\" class=\"headerlink\" title=\"常见分区命令\"></a>常见分区命令</h2><h3 id=\"向分区表添加新的分区\"><a href=\"#向分区表添加新的分区\" class=\"headerlink\" title=\"向分区表添加新的分区\"></a>向分区表添加新的分区</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> sale <span class=\"keyword\">add</span> <span class=\"keyword\">partition</span> (<span class=\"keyword\">partition</span> p6 <span class=\"keyword\">values</span> less than (<span class=\"number\">2026</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除指定的分区\"><a href=\"#删除指定的分区\" class=\"headerlink\" title=\"删除指定的分区\"></a>删除指定的分区</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> sale <span class=\"keyword\">drop</span> <span class=\"keyword\">partition</span> p6;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重新组织分区\"><a href=\"#重新组织分区\" class=\"headerlink\" title=\"重新组织分区\"></a>重新组织分区</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> sale REORGANIZE <span class=\"keyword\">PARTITION</span> p0, p1, p2,p3, p4, p5 <span class=\"keyword\">INTO</span> (</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p0 <span class=\"keyword\">values</span> less than (<span class=\"number\">2021</span>),</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p1 <span class=\"keyword\">values</span> less than (<span class=\"number\">2023</span>),</span><br><span class=\"line\">    <span class=\"keyword\">partition</span> p2 <span class=\"keyword\">values</span> less than (<span class=\"number\">2025</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"合并相邻的分区\"><a href=\"#合并相邻的分区\" class=\"headerlink\" title=\"合并相邻的分区\"></a>合并相邻的分区</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"分析指定分区的统计信息\"><a href=\"#分析指定分区的统计信息\" class=\"headerlink\" title=\"分析指定分区的统计信息\"></a>分析指定分区的统计信息</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> sale analyze <span class=\"keyword\">partition</span> p0;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h1><blockquote>\n<p>服务器 openEuler</p>\n</blockquote>\n<h2 id=\"一主一从\"><a href=\"#一主一从\" class=\"headerlink\" title=\"一主一从\"></a>一主一从</h2><table>\n<thead>\n<tr>\n<th>角色</th>\n<th>主机名</th>\n<th>IP地址</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>主库</td>\n<td>master</td>\n<td>192.168.1.201</td>\n</tr>\n<tr>\n<td>从库</td>\n<td>slave</td>\n<td>192.168.1.202</td>\n</tr>\n</tbody></table>\n<h3 id=\"分别安装MySQL\"><a href=\"#分别安装MySQL\" class=\"headerlink\" title=\"分别安装MySQL\"></a>分别安装MySQL</h3><h4 id=\"下载MySQL\"><a href=\"#下载MySQL\" class=\"headerlink\" title=\"下载MySQL\"></a>下载MySQL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://cdn.mysql.com//Downloads/MySQL-9.0/mysql-9.0.1-1.el9.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建安装包目录\"><a href=\"#创建安装包目录\" class=\"headerlink\" title=\"创建安装包目录\"></a>创建安装包目录</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir mysql</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"释放安装包到安装包目录\"><a href=\"#释放安装包到安装包目录\" class=\"headerlink\" title=\"释放安装包到安装包目录\"></a>释放安装包到安装包目录</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xvf mysql-9.0.1-1.el9.x86_64.rpm-bundle.tar -C mysql</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"切换到MySQL安装包目录\"><a href=\"#切换到MySQL安装包目录\" class=\"headerlink\" title=\"切换到MySQL安装包目录\"></a>切换到MySQL安装包目录</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd mysql</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"安装MySQL\"><a href=\"#安装MySQL\" class=\"headerlink\" title=\"安装MySQL\"></a>安装MySQL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh *.rpm  --force --nodeps</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动MySQL\"><a href=\"#启动MySQL\" class=\"headerlink\" title=\"启动MySQL\"></a>启动MySQL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start mysqld</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"设置MySQL开机自启动\"><a href=\"#设置MySQL开机自启动\" class=\"headerlink\" title=\"设置MySQL开机自启动\"></a>设置MySQL开机自启动</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable mysqld</span><br></pre></td></tr></table></figure>\n\n<p>在服务器初始启动时，假设服务器的数据目录为空，会发生以下情况：</p>\n<ul>\n<li><p>服务器已初始化。</p>\n</li>\n<li><p>SSL 证书和密钥文件在数据目录中生成。</p>\n</li>\n<li><p><code>validate_password</code> 已安装并启用。</p>\n</li>\n<li><p>创建了一个超级用户帐户<code>&#39;root&#39;@&#39;localhost</code>。超级用户的密码已设置并存储在错误日志文件中。要显示它，请使用以下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep &#x27;temporary password&#x27; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>\n\n<p>通过使用生成的临时密码登录并为超级用户帐户设置自定义密码，尽快更改 root 密码：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;Lihaozhe!!@@1122&#x27;</span>;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"设置远程访问地址\"><a href=\"#设置远程访问地址\" class=\"headerlink\" title=\"设置远程访问地址\"></a>设置远程访问地址</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> mysql.user <span class=\"keyword\">set</span> host <span class=\"operator\">=</span> <span class=\"string\">&#x27;%&#x27;</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span><span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"退出MySQL\"><a href=\"#退出MySQL\" class=\"headerlink\" title=\"退出MySQL\"></a>退出MySQL</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"重启MySQL\"><a href=\"#重启MySQL\" class=\"headerlink\" title=\"重启MySQL\"></a>重启MySQL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"防火墙开放端口\"><a href=\"#防火墙开放端口\" class=\"headerlink\" title=\"防火墙开放端口\"></a>防火墙开放端口</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=3306/tcp --add-port=33060/tcp --permanent</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"重启防火墙\"><a href=\"#重启防火墙\" class=\"headerlink\" title=\"重启防火墙\"></a>重启防火墙</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"主库配置\"><a href=\"#主库配置\" class=\"headerlink\" title=\"主库配置\"></a>主库配置</h3><blockquote>\n<p>在主从库中分别建一个你需要同步的测试库，比如我这里创建的库叫lihaozhe，然后在这两个库中分别建一个测试表，都是空表即可。</p>\n</blockquote>\n<h4 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/my.cnf</span><br></pre></td></tr></table></figure>\n\n<p>追加以下内容：</p>\n<blockquote>\n<p>实验配置</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server-id=201</span><br><span class=\"line\">log-bin=mysql-bin</span><br><span class=\"line\">innodb_flush_log_at_trx_commit = 1</span><br><span class=\"line\">sync_binlog = 1</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>生产环境配置</p>\n<p>还可以配置一些其他参数：</p>\n<p>log_bin_index（bin日志文件索引位置），</p>\n<p>expire_logs_days 日志多少天过期，binlog_format 等。</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server-id=201    #服务器 id，随意，但要唯一</span><br><span class=\"line\">log-bin=mysql-bin   #二进制文件存放路径</span><br><span class=\"line\">binlog-do-db=lihaozhe    #待同步的数据库日志</span><br><span class=\"line\">binlog-ignore-db=mysql  #不同步的数据库日志</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建账号用于主从复制\"><a href=\"#创建账号用于主从复制\" class=\"headerlink\" title=\"创建账号用于主从复制\"></a>创建账号用于主从复制</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#创建用户 我这里用户名为copyuser，注意这里的ip是从库服务器的ip</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;lihaozhe&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">WITH</span> mysql_native_password <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;Lihaozhe!!@@6633&#x27;</span>;</span><br><span class=\"line\">#给主从复制账号授权</span><br><span class=\"line\"><span class=\"keyword\">grant</span> replication slave <span class=\"keyword\">on</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">to</span> <span class=\"string\">&#x27;lihaozhe&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"重启MySQL-1\"><a href=\"#重启MySQL-1\" class=\"headerlink\" title=\"重启MySQL\"></a>重启MySQL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看主库状态\"><a href=\"#查看主库状态\" class=\"headerlink\" title=\"查看主库状态\"></a>查看主库状态</h4><blockquote>\n<p>登录数据库后查看 </p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> master status;</span><br></pre></td></tr></table></figure>\n\n<p>显示如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> master status;</span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------------+----------+--------------+------------------+-------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> File             <span class=\"operator\">|</span> Position <span class=\"operator\">|</span> Binlog_Do_DB <span class=\"operator\">|</span> Binlog_Ignore_DB <span class=\"operator\">|</span> Executed_Gtid_Set <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------------+----------+--------------+------------------+-------------------+</span></span><br><span class=\"line\"><span class=\"operator\">|</span> mysql<span class=\"operator\">-</span>bin<span class=\"number\">.000001</span> <span class=\"operator\">|</span>      <span class=\"number\">157</span> <span class=\"operator\">|</span> lihaozhe     <span class=\"operator\">|</span> mysql            <span class=\"operator\">|</span>                   <span class=\"operator\">|</span></span><br><span class=\"line\"><span class=\"operator\">+</span><span class=\"comment\">------------------+----------+--------------+------------------+-------------------+</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：File 和 Position的值从库同步的时候需要</p>\n</blockquote>\n<h3 id=\"从库配置\"><a href=\"#从库配置\" class=\"headerlink\" title=\"从库配置\"></a>从库配置</h3><blockquote>\n<p>在主从库中分别建一个你需要同步的测试库，比如我这里创建的库叫lihaozhe，然后在这两个库中分别建一个测试表，都是空表即可。</p>\n</blockquote>\n<h4 id=\"修改配置文件-1\"><a href=\"#修改配置文件-1\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/my.cnf</span><br></pre></td></tr></table></figure>\n\n<p>追加以下内容：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server-id=202    #服务器 id，随意，但要唯一</span><br><span class=\"line\">log-bin=mysql-bin   #二进制文件存放路径</span><br><span class=\"line\">replicate-do-db=lihaozhe    #待同步的数据库</span><br><span class=\"line\">replicate-ignore-db=mysql,information_schema,performance_schema  #不同步的数据库</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>以上面主库配置相比，就是除了server-id不一样，这里还需要配置replicate-do-db和replicate-ignore-db，注意不是日志。</p>\n</blockquote>\n<h4 id=\"重启MySQL-2\"><a href=\"#重启MySQL-2\" class=\"headerlink\" title=\"重启MySQL\"></a>重启MySQL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"实现主从同步\"><a href=\"#实现主从同步\" class=\"headerlink\" title=\"实现主从同步\"></a>实现主从同步</h4><blockquote>\n<p>登录数据库后</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 关闭从库</span></span><br><span class=\"line\">stop slave;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 设置同步，注意这里是主库ip，日志名称和位置是我们之前上图中看到的名称和位置</span></span><br><span class=\"line\">change master <span class=\"keyword\">to</span> master_host<span class=\"operator\">=</span><span class=\"string\">&#x27;192.168.1.201&#x27;</span>,master_user<span class=\"operator\">=</span><span class=\"string\">&#x27;lihaozhe&#x27;</span>,master_password<span class=\"operator\">=</span><span class=\"string\">&#x27;Lihaozhe!!@@6633&#x27;</span>,master_log_file<span class=\"operator\">=</span><span class=\"string\">&#x27;mysql-bin.000001&#x27;</span>,master_log_pos<span class=\"operator\">=</span><span class=\"number\">157</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 开启从库</span></span><br><span class=\"line\"><span class=\"keyword\">start</span> slave; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 检查服务器状态</span></span><br><span class=\"line\"><span class=\"keyword\">show</span> slave status \\G;</span><br></pre></td></tr></table></figure>\n\n<p>显示如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql<span class=\"operator\">&gt;</span> <span class=\"keyword\">show</span> slave status \\G;</span><br><span class=\"line\"><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span> <span class=\"number\">1.</span> <span class=\"type\">row</span> <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"operator\">*</span></span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> source <span class=\"keyword\">to</span> send event</span><br><span class=\"line\">                  Master_Host: <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.201</span></span><br><span class=\"line\">                  Master_User: lihaozhe</span><br><span class=\"line\">                  Master_Port: <span class=\"number\">3306</span></span><br><span class=\"line\">                Connect_Retry: <span class=\"number\">60</span></span><br><span class=\"line\">              Master_Log_File: mysql<span class=\"operator\">-</span>bin<span class=\"number\">.000001</span></span><br><span class=\"line\">          Read_Master_Log_Pos: <span class=\"number\">472</span></span><br><span class=\"line\">               Relay_Log_File: slave<span class=\"operator\">-</span>relay<span class=\"operator\">-</span>bin<span class=\"number\">.000002</span></span><br><span class=\"line\">                Relay_Log_Pos: <span class=\"number\">326</span></span><br><span class=\"line\">        Relay_Master_Log_File: mysql<span class=\"operator\">-</span>bin<span class=\"number\">.000001</span></span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br><span class=\"line\">              Replicate_Do_DB: lihaozhe</span><br><span class=\"line\">          Replicate_Ignore_DB: mysql,information_schema,performance_schema</span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: </span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: <span class=\"number\">0</span></span><br><span class=\"line\">                   Last_Error: </span><br><span class=\"line\">                 Skip_Counter: <span class=\"number\">0</span></span><br><span class=\"line\">          Exec_Master_Log_Pos: <span class=\"number\">472</span></span><br><span class=\"line\">              Relay_Log_Space: <span class=\"number\">536</span></span><br><span class=\"line\">              Until_Condition: <span class=\"keyword\">None</span></span><br><span class=\"line\">               Until_Log_File: </span><br><span class=\"line\">                Until_Log_Pos: <span class=\"number\">0</span></span><br><span class=\"line\">           Master_SSL_Allowed: <span class=\"keyword\">No</span></span><br><span class=\"line\">           Master_SSL_CA_File: </span><br><span class=\"line\">           Master_SSL_CA_Path: </span><br><span class=\"line\">              Master_SSL_Cert: </span><br><span class=\"line\">            Master_SSL_Cipher: </span><br><span class=\"line\">               Master_SSL_Key: </span><br><span class=\"line\">        Seconds_Behind_Master: <span class=\"number\">0</span></span><br><span class=\"line\">Master_SSL_Verify_Server_Cert: <span class=\"keyword\">No</span></span><br><span class=\"line\">                Last_IO_Errno: <span class=\"number\">0</span></span><br><span class=\"line\">                Last_IO_Error: </span><br><span class=\"line\">               Last_SQL_Errno: <span class=\"number\">0</span></span><br><span class=\"line\">               Last_SQL_Error: </span><br><span class=\"line\">  Replicate_Ignore_Server_Ids: </span><br><span class=\"line\">             Master_Server_Id: <span class=\"number\">201</span></span><br><span class=\"line\">                  Master_UUID: ee21ecf9<span class=\"number\">-01</span>be<span class=\"number\">-11</span>ed<span class=\"number\">-916</span>c<span class=\"number\">-000</span>c29c9a6f5</span><br><span class=\"line\">             Master_Info_File: mysql.slave_master_info</span><br><span class=\"line\">                    SQL_Delay: <span class=\"number\">0</span></span><br><span class=\"line\">          SQL_Remaining_Delay: <span class=\"keyword\">NULL</span></span><br><span class=\"line\">      Slave_SQL_Running_State: Replica has read <span class=\"keyword\">all</span> relay log; waiting <span class=\"keyword\">for</span> more updates</span><br><span class=\"line\">           Master_Retry_Count: <span class=\"number\">86400</span></span><br><span class=\"line\">                  Master_Bind: </span><br><span class=\"line\">      Last_IO_Error_Timestamp: </span><br><span class=\"line\">     Last_SQL_Error_Timestamp: </span><br><span class=\"line\">               Master_SSL_Crl: </span><br><span class=\"line\">           Master_SSL_Crlpath: </span><br><span class=\"line\">           Retrieved_Gtid_Set: </span><br><span class=\"line\">            Executed_Gtid_Set: </span><br><span class=\"line\">                Auto_Position: <span class=\"number\">0</span></span><br><span class=\"line\">         Replicate_Rewrite_DB: </span><br><span class=\"line\">                 Channel_Name: </span><br><span class=\"line\">           Master_TLS_Version: </span><br><span class=\"line\">       Master_public_key_path: </span><br><span class=\"line\">        Get_master_public_key: <span class=\"number\">0</span></span><br><span class=\"line\">            Network_Namespace: </span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"type\">row</span> <span class=\"keyword\">in</span> <span class=\"keyword\">set</span>, <span class=\"number\">1</span> warning (<span class=\"number\">0.00</span> sec)</span><br><span class=\"line\"></span><br><span class=\"line\">ERROR: </span><br><span class=\"line\"><span class=\"keyword\">No</span> query specified</span><br><span class=\"line\"></span><br><span class=\"line\">mysql<span class=\"operator\">&gt;</span> </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><blockquote>\n<p>主表操作，从表观察0</p>\n</blockquote>\n","text":" MySQL基础数据库概论数据管理演变 人工档案管理 文件系统管理 数据库管理 数据库管理系统 层次数据库 网状型数据库 关系型数据库 网格型数据库 对象型数据...","permalink":"/post/第一篇","photos":[],"count_time":{"symbolsCount":"76k","symbolsTime":"1:09"},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MySQL%E5%9F%BA%E7%A1%80\"><span class=\"toc-text\">MySQL基础</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA\"><span class=\"toc-text\">数据库概论</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E6%BC%94%E5%8F%98\"><span class=\"toc-text\">数据管理演变</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F\"><span class=\"toc-text\">数据库管理系统</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">关系型数据库</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">数据库常用操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">连接数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E7%9B%AE%E5%89%8D%E5%B7%B2%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">显示目前已有数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">显示当前使用的数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">创建数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9B%E5%BB%BA%E8%AF%A6%E7%BB%86%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">查看数据库创建详细过程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%97%B6%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E9%9B%86\"><span class=\"toc-text\">创建数据库同时指定字符集</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">删除数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">切换数据库</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">数据表常用操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E8%A1%A8\"><span class=\"toc-text\">创建基本数据表</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%88%9B%E5%BB%BA%E8%AF%A6%E7%BB%86%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">查看数据表创建详细过程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8F%8F%E8%BF%B0%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">描述数据表结构</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E8%A1%A8\"><span class=\"toc-text\">显示当前数据库所有数据表</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A1%A8\"><span class=\"toc-text\">删除数据表</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E\"><span class=\"toc-text\">存储引擎</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">数据类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%95%B4%E6%95%B0%E5%9E%8B\"><span class=\"toc-text\">整数型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B5%AE%E7%82%B9%E5%9E%8B\"><span class=\"toc-text\">浮点型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%9A%E7%82%B9%E5%9E%8B\"><span class=\"toc-text\">定点型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">日期与时间</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">字符串</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DML\"><span class=\"toc-text\">DML</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87\"><span class=\"toc-text\">准备</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#insert\"><span class=\"toc-text\">insert</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#update\"><span class=\"toc-text\">update</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#delete-truncate\"><span class=\"toc-text\">delete truncate</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">约束</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">非空约束</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">默认约束</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">唯一性约束</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5%E6%80%A7%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">检查性约束</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">主键约束</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8D%95%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">单主键约束</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E%E9%95%BF\"><span class=\"toc-text\">主键自增长</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%81%94%E5%90%88%E4%B8%BB%E9%94%AE\"><span class=\"toc-text\">联合主键</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">外键约束</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#cascade\"><span class=\"toc-text\">cascade</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#no-action\"><span class=\"toc-text\">no action</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#restrict\"><span class=\"toc-text\">restrict</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#set-null\"><span class=\"toc-text\">set null</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#default\"><span class=\"toc-text\">default</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93%EF%BC%9A\"><span class=\"toc-text\">总结：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E8%A1%A8\"><span class=\"toc-text\">修改表</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D%E7%A7%B0\"><span class=\"toc-text\">修改表名称</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">修改字段数据类型</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE%E7%BA%A6%E6%9D%9F\"><span class=\"toc-text\">修改字段数据约束</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E5%90%8D%E7%A7%B0\"><span class=\"toc-text\">修改字段名称</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5\"><span class=\"toc-text\">添加字段</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5\"><span class=\"toc-text\">删除字段</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B0%83%E6%95%B4%E5%AD%97%E6%AE%B5%E4%BD%8D%E7%BD%AE\"><span class=\"toc-text\">调整字段位置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E\"><span class=\"toc-text\">修改存储引擎</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%AD%97%E7%AC%A6%E9%9B%86\"><span class=\"toc-text\">修改字符集</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F\"><span class=\"toc-text\">数据备份与还原</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD\"><span class=\"toc-text\">数据备份</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E8%BF%98%E5%8E%9F\"><span class=\"toc-text\">数据还原</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80-DQL\"><span class=\"toc-text\">数据库查询语言 DQL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">准备数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">单表查询</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89\"><span class=\"toc-text\">查询所有</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8C%89%E5%AD%97%E6%AE%B5%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">按字段查询</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#in-%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">in 查询</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#null-%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">null 查询</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">模糊查询</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8E%92%E5%BA%8F\"><span class=\"toc-text\">排序</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">聚合函数</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8E%BB%E9%87%8D\"><span class=\"toc-text\">去重</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%86%E7%BB%84\"><span class=\"toc-text\">分组</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">分页查询</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">多表查询</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AD%90%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">子查询</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BA%A4%E5%8F%89%E6%9F%A5%E8%AF%A2-cross-join\"><span class=\"toc-text\">交叉查询 cross join</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%86%85%E8%BF%9E%E6%8E%A5-inner-join\"><span class=\"toc-text\">内连接 inner join</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5-left-outer-join\"><span class=\"toc-text\">左外连接 left outer join</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5-right-outer-join\"><span class=\"toc-text\">右外连接 right outer join</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%A8%E8%BF%9E%E6%8E%A5-full-join\"><span class=\"toc-text\">全连接 full join</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#union-all\"><span class=\"toc-text\">union all</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#union\"><span class=\"toc-text\">union</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#some-any-all\"><span class=\"toc-text\">some any all</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#exits\"><span class=\"toc-text\">exits</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">自关联查询</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">练习</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">函数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0-1\"><span class=\"toc-text\">聚合函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">数学函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">字符串函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">日期时间函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%89%E6%8B%A9%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">选择函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E7%AA%97%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">开窗函数</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A1%8C%E5%88%97%E8%BD%AC%E6%8D%A2\"><span class=\"toc-text\">行列转换</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%97%E8%BD%AC%E8%A1%8C\"><span class=\"toc-text\">列转行</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%A1%8C%E8%BD%AC%E5%88%97\"><span class=\"toc-text\">行转列</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BA%AB%E4%BB%BD%E8%AF%81\"><span class=\"toc-text\">身份证</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#json\"><span class=\"toc-text\">json</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%86%E5%9B%BE\"><span class=\"toc-text\">视图</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E5%8A%A1\"><span class=\"toc-text\">事务</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">表分区</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E5%88%86%E5%8C%BA%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">表分区介绍</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%86%E5%8C%BA%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">分区适用场景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%86%E5%8C%BA%E7%AD%96%E7%95%A5\"><span class=\"toc-text\">分区策略</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#RANGE%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">RANGE分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#LIST%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">LIST分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#HASH%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">HASH分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#KEY%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">KEY分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#COLUMNS-%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">COLUMNS 分区</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E8%A7%81%E5%88%86%E5%8C%BA%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">常见分区命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%91%E5%88%86%E5%8C%BA%E8%A1%A8%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">向分区表添加新的分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E7%9A%84%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">删除指定的分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%87%8D%E6%96%B0%E7%BB%84%E7%BB%87%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">重新组织分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%88%E5%B9%B6%E7%9B%B8%E9%82%BB%E7%9A%84%E5%88%86%E5%8C%BA\"><span class=\"toc-text\">合并相邻的分区</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E6%9E%90%E6%8C%87%E5%AE%9A%E5%88%86%E5%8C%BA%E7%9A%84%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">分析指定分区的统计信息</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6\"><span class=\"toc-text\">主从复制</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E4%B8%BB%E4%B8%80%E4%BB%8E\"><span class=\"toc-text\">一主一从</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E5%88%AB%E5%AE%89%E8%A3%85MySQL\"><span class=\"toc-text\">分别安装MySQL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BDMySQL\"><span class=\"toc-text\">下载MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E5%AE%89%E8%A3%85%E5%8C%85%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">创建安装包目录</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8A%E6%94%BE%E5%AE%89%E8%A3%85%E5%8C%85%E5%88%B0%E5%AE%89%E8%A3%85%E5%8C%85%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">释放安装包到安装包目录</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%87%E6%8D%A2%E5%88%B0MySQL%E5%AE%89%E8%A3%85%E5%8C%85%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">切换到MySQL安装包目录</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85MySQL\"><span class=\"toc-text\">安装MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8MySQL\"><span class=\"toc-text\">启动MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AEMySQL%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">设置MySQL开机自启动</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81\"><span class=\"toc-text\">修改密码</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%9C%B0%E5%9D%80\"><span class=\"toc-text\">设置远程访问地址</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%80%80%E5%87%BAMySQL\"><span class=\"toc-text\">退出MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%90%AFMySQL\"><span class=\"toc-text\">重启MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%98%B2%E7%81%AB%E5%A2%99%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3\"><span class=\"toc-text\">防火墙开放端口</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%90%AF%E9%98%B2%E7%81%AB%E5%A2%99\"><span class=\"toc-text\">重启防火墙</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E5%BA%93%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">主库配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">修改配置文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%94%A8%E4%BA%8E%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6\"><span class=\"toc-text\">创建账号用于主从复制</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%90%AFMySQL-1\"><span class=\"toc-text\">重启MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E4%B8%BB%E5%BA%93%E7%8A%B6%E6%80%81\"><span class=\"toc-text\">查看主库状态</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%8E%E5%BA%93%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">从库配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-1\"><span class=\"toc-text\">修改配置文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%90%AFMySQL-2\"><span class=\"toc-text\">重启MySQL</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5\"><span class=\"toc-text\">实现主从同步</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">测试</span></a></li></ol></li></ol></li></ol>","author":{"name":"年阔正","slug":"blog-author","avatar":"https://foruda.gitee.com/avatar/1689439715159458082/13208566_niankuozheng_1689439715.png","link":"/","description":"一个学知识的学生","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"css","date":"2024-10-16T08:39:46.339Z","updated":"2024-10-16T09:36:47.096Z","comments":true,"path":"api/articles/css.json","keywords":null,"cover":[],"text":" title：css1-CSS介绍1.1-web标准W3C组织：他制定web领域中众多的标准。 关于网页的标准：一个网页（界面）应该由4部分组成： 网页内容：网...","permalink":"/post/css","photos":[],"count_time":{"symbolsCount":"48k","symbolsTime":"44 mins."},"categories":[],"tags":[],"author":{"name":"年阔正","slug":"blog-author","avatar":"https://foruda.gitee.com/avatar/1689439715159458082/13208566_niankuozheng_1689439715.png","link":"/","description":"一个学知识的学生","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2024-10-16T01:24:11.687Z","updated":"2024-10-16T06:25:17.709Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":[],"text":"Welcome to Hexo! This is your very first post. Check documentation for more info...","permalink":"/post/hello-world","photos":[],"count_time":{"symbolsCount":445,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"年阔正","slug":"blog-author","avatar":"https://foruda.gitee.com/avatar/1689439715159458082/13208566_niankuozheng_1689439715.png","link":"/","description":"一个学知识的学生","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}